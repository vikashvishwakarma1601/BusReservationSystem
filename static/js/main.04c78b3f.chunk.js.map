{"version":3,"sources":["components/backend.js","components/auth/helper.js","UserContext/UserContext.js","components/core/SearchBus.js","components/bus/helper.js","components/core/Home.js","components/core/Navbar.js","components/user/Login.js","components/user/Register.js","components/user/SeatLayout.js","components/user/BookingDetail.js","components/payment/Payment.js","components/payment/helper.js","components/user/helper.js","components/user/Tickets.js","components/auth/privateRoute.js","reducer/UserReducer.js","Routes.js","serviceWorker.js","index.js"],"names":["API","login","user","a","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","catch","err","console","log","register","logout","next","undefined","window","localStorage","removeItem","message","error","isAuthenticated","getItem","parse","React","createContext","SearchBus","props","dispatch","useContext","UserContext","useState","Bus_ID","Source","Destination","loading","Error","BusData","didRender","searchData","setSearchData","TravelDate","travelDate","setTravelDate","handleChange","Date","inputField","event","target","value","handleSubmit","preventDefault","searchBus","data","className","style","display","onSubmit","e","onChange","aria-hidden","focusable","data-prefix","data-icon","role","xmlns","viewBox","fill","d","src","alt","type","id","map","bus","idx","key","BusType","Arrival","getHours","slice","getMinutes","getDate","getMonth","getYear","totalSeats","Seats","Array","arr","filter","Seat","length","AvailableSeatInfo","Fare","onClick","BusDetails","newBusDetail","history","push","handleBooking","performRender","Home","toggle","setToggle","withRouter","to","width","Login","email","useRef","Email","UserPassword","Loading","didRedirect","formData","setFormData","Password","isEmailVerified","isPasswordVerified","token","UserID","authToken","_id","setItem","color","class","htmlFor","ref","name","placeholder","regexp","RegExp","test","emailValidateError","passwordValidateError","Register","Name","Gender","Mobile","Success","isGenderVerified","verifiedGender","isMobileVerified","isNameVerified","renderBtn","Message","success","nameValidateError","mobileValidateError","SeatLayout","bookDetail","setBookDetail","renderSingleSeat","ind","AllSeats","SeatNo","innerText","onAddSeat","includes","indexOf","classList","remove","splice","add","handleSeatClass","renderSeatRow","Bookings","userBusDetail","Object","keys","SeatsDetail","Age","userDetail","setUserDetail","isAgeVerified","renderForm","for","Number","ageValidateError","renderPaynBtn","handleBookingData","seatInfo","seatNo","handleSeatNumber","seat","renderBookingSummary","Payment","Card","CVV","isCardNoVerified","isCVVVerified","ticketDetail","User_ID","bookTicket","cardValidateError","cvvValidateError","getTickets","removeTicket","Tickets","ticketDetails","userTicketDetails","setTicketDetails","removalStatus","setRemovalStatus","useEffect","getTicketData","renderPasengerName","person","renderLoadingMsg","renderMsg","Departure","TransactionId","title","handleTicketHistory","renderEmptyHistory","PrivateRoute","Component","component","rest","render","pathname","state","from","location","userReducer","action","initialState","Routes","useReducer","UserReducer","Provider","exact","path","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qUAAaA,EAAM,6B,wBCGNC,EAAK,uCAAG,WAAOC,GAAP,SAAAC,EAAA,sEACJC,MAAM,GAAD,OAAIJ,EAAJ,cAAqB,CACnCK,OAAQ,OACRC,QAAS,CACLC,OAAQ,mBACR,eAAgB,oBAGpBC,KAAMC,KAAKC,UAAUR,KAEpBS,MAAK,SAACC,GACH,OAAOA,EAASC,UAEnBC,OAAM,SAACC,GACJC,QAAQC,IAAI,sBAdH,mFAAH,sDAkBLC,EAAQ,uCAAG,WAAOhB,GAAP,SAAAC,EAAA,sEACPC,MAAM,GAAD,OAAIJ,EAAJ,iBAAwB,CACtCK,OAAQ,OACRC,QAAS,CACLC,OAAQ,mBACR,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUR,KAEpBS,MAAK,SAACC,GACH,OAAOA,EAASC,UAEnBC,OAAM,SAACC,GACJC,QAAQC,IAAI,yBAbA,mFAAH,sDAiBRE,EAAM,uCAAG,WAAOC,GAAP,SAAAjB,EAAA,kEACIkB,WAAXC,SACPC,aAAaC,WAAW,aACxBJ,KAHc,SAMLhB,MAAM,GAAD,OAAIJ,EAAJ,eAAsB,CACpCK,OAAQ,QAEPM,MAAK,SAACC,GAAeA,EAASC,KAAK,CAAEY,QAAS,2BAC9CX,OAAM,SAACY,GAAYV,QAAQC,IAAI,uBAVlB,mFAAH,sDAsCNU,EAAkB,WAC3B,MAAqB,oBAAVL,WAGPC,aAAaK,QAAQ,cACdnB,KAAKoB,MAAMN,aAAaK,QAAQ,gBC/EhCE,MAAMC,gBCiNNC,EA7MG,SAACC,GAAW,IAElBC,EAAaC,qBAAWC,GAAxBF,SAFiB,EAIWG,mBAAS,CACzCC,OAAQ,GACRC,OAAQ,GACRC,YAAa,GACbC,SAAS,EACTC,MAAO,GACPC,QAAS,GACTC,WAAW,IAXU,mBAIlBC,EAJkB,KAINC,EAJM,OAcST,mBAAS,CAAEU,WAAY,KAdhC,mBAcpBC,EAdoB,KAcRC,EAdQ,KAenBF,EAAeC,EAAfD,WACER,EAA4DM,EAA5DN,OAAQC,EAAoDK,EAApDL,YAAaC,EAAuCI,EAAvCJ,QAASG,EAA8BC,EAA9BD,UAAWF,EAAmBG,EAAnBH,MAAOC,EAAYE,EAAZF,QAIlDO,GAFO,IAAIC,KAEI,SAACC,GAAD,OAAgB,SAACC,GAClCrC,QAAQC,IAAImC,GACO,eAAfA,GACAL,EAAa,IAAII,KAAKE,EAAMC,OAAOC,OACnCvC,QAAQC,IAAI+B,EAAYK,EAAMC,OAAOC,OACrCN,EAAc,CAAEF,eAChB/B,QAAQC,IAAI8B,IAIZD,EAAc,2BAAKD,GAAN,kBAAmBO,EAAaC,EAAMC,OAAOC,YAK5DC,EAAe,SAACH,GAClBA,EAAMI,iBACNX,EAAc,2BAAKD,GAAN,IAAkBJ,SAAS,EAAMC,MAAO,GAAIE,WAAW,KCxCnD,SAAC,GAAqC,IAApCL,EAAmC,EAAnCA,OAAOC,EAA4B,EAA5BA,YAA4B,EAAhBQ,WAC1C,OAAO5C,MAAM,GAAD,OAAIJ,EAAJ,sBAAqBuC,EAArB,YAA+BC,GAAc,CACrDnC,OAAO,QAEVM,MAAK,SAACC,GACH,OAAOA,EAASC,UAEnBC,OAAM,SAACC,GAAQC,QAAQC,IAAIF,MDkCxB2C,CAAU,CAAEnB,SAAQC,cAAaO,eAC5BpC,MAAK,SAACgD,GACCA,EAAKjB,MACLI,EAAc,2BAAKD,GAAN,IAAkBH,MAAOiB,EAAKjB,MAAOD,SAAS,EAAOE,QAAS,GAAIC,WAAW,KAG1FE,EAAc,2BAAKD,GAAN,IAAkBD,WAAW,EAAMH,SAAS,EAAOC,MAAO,GAAIC,QAASgB,QAG3F7C,OAAM,SAACC,GACJ+B,EAAc,2BAAKD,GAAN,IAAkBH,MAAO,sBAAuBD,SAAS,EAAOE,QAAS,GAAIC,WAAW,SAgJjH,OACI,oCACI,6BAASgB,UAAU,kBA3Ef,oCACJ,yBAAKA,UAAU,aACX,2CACA,2DArEA,yBAAKA,UAAU,gBAAgBC,MAAO,CAAEC,QAASpB,EAAQ,QAAU,SACtEA,GAKG,yBAAKkB,UAAU,gBAAgBC,MAAO,CAAEC,QAASrB,EAAU,QAAU,SAArE,oBAmEJ,yBAAKmB,UAAU,eACX,0BAAMG,SAAU,SAAAC,GAAC,OAAIR,EAAaQ,KAC9B,yBAAKJ,UAAU,YACX,yBAAKA,UAAU,mBACX,yBAAKA,UAAU,UACX,yBAAKA,UAAU,aACX,4BAAQK,SAAUf,EAAa,WAC3B,4BAAQK,MAAM,IAAd,eACA,4BAAQA,MAAM,WAAd,WACA,4BAAQA,MAAM,aAAd,aACA,4BAAQA,MAAM,QAAd,QACA,4BAAQA,MAAM,SAAd,SACA,4BAAQA,MAAM,YAAd,aAEJ,yBAAKK,UAAU,cAAa,wCAEhC,yBAAKA,UAAU,gBACX,yBAAKA,UAAU,kBACf,yBAAKA,UAAU,cACX,yBAAKM,cAAY,OAAOC,UAAU,QAAQC,cAAY,MAAMC,YAAU,OAClET,UAAU,iCAAiCU,KAAK,MAChDC,MAAM,6BAA6BC,QAAQ,eAC3C,0BAAMC,KAAK,eACPC,EAAE,u7CAO1B,yBAAKd,UAAU,mBACX,yBAAKA,UAAU,UACX,yBAAKA,UAAU,aACX,4BAAQK,SAAUf,EAAa,gBAC3B,4BAAQK,MAAM,IAAd,eACA,4BAAQA,MAAM,WAAd,WACA,4BAAQA,MAAM,aAAd,aACA,4BAAQA,MAAM,SAAd,SACA,4BAAQA,MAAM,QAAd,QACA,4BAAQA,MAAM,YAAd,aAEJ,yBAAKK,UAAU,iBAAgB,sCAEnC,yBAAKA,UAAU,gBACX,yBAAKA,UAAU,kBACf,yBAAKA,UAAU,cACX,yBAAKe,IAAI,mBAAmBC,IAAI,aAOhD,yBAAKhB,UAAU,UACX,yBAAKA,UAAU,eAAc,yCAC7B,2BAAOiB,KAAK,OAAOZ,SAAUf,EAAa,cAAe4B,GAAG,kBAIpE,4BAAQlB,UAAU,cAAlB,kBArGM,WAElB,GAAIhB,EACA,OACI,yBAAKgB,UAAU,eACX,4BACI,4BACI,4BACI,wCACA,oCACA,oCACA,yCACA,oCACA,+BAGR,4BAAKjB,EAAQoC,KAAI,SAACC,EAAKC,GACnB,OAAQ,wBAAIC,IAAKD,GACb,4BAAKD,EAAIG,SACT,6BAAM,IAAM,IAAIhC,KAAK6B,EAAII,SAASC,YAAYC,OAAO,GAAK,KAAO,IAAM,IAAInC,KAAK6B,EAAII,SAASG,cAAcD,OAAO,IAClH,6BAAM,IAAMvC,EAAWyC,WAAWF,OAAO,GAAK,KAAO,MAASvC,EAAW0C,WAAc,IAAIH,OAAO,GAAK,KAAO,IAAMvC,EAAW2C,WAAWJ,OAAO,IACjJ,4BA7BF,SAACN,GACvB,IAAIW,EAAaX,EAAIY,MAIrB,OAHqB,YAAI,IAAIC,MAAM,KAAKd,KAAI,SAACe,EAAKb,GAC9C,OAA0C,IAAnCU,EAAW,QAAUV,EAAM,OAEhBc,QAAO,SAACC,GAAD,OAAmB,IAATA,KAAeC,OAwBzBC,CAAkBlB,IACvB,4BAAKA,EAAImB,MACT,wBAAIC,QAAS,SAAApC,GAAC,OA3CpB,SAACqC,GACnB,IAAIC,EAAY,eAAQD,GACxBC,EAAavD,WAAaA,EACtBpB,KACAO,EAAS,CAAE2C,KAAM,wBAAyBwB,WAAYC,IACtDrE,EAAMsE,QAAQC,KAAK,sBAGnBvE,EAAMsE,QAAQC,KAAK,UAmCmBC,CAAczB,IAAMpB,UAAU,eAAhD,qBA2FnB8C,KE/KEC,G,MAzBF,SAAC,GAAe,IAAdJ,EAAa,EAAbA,QAAa,EAGGlE,oBAAS,GAHZ,mBAGjBuE,EAHiB,KAGVC,EAHU,KAKxB,OAAS,oCACD,yBAAKjD,UAAU,gBACX,yBAAKA,UAAU,gBACX,yBAAKA,UAAU,SACX,gDAAqB,6BAArB,oBACA,8FACA,4BAAQwC,QAAS,SAAApC,GAAC,OAAE6C,GAAWD,IAAShD,UAAU,YAAlD,iBAGR,yBAAKA,UAAU,iBACX,yBAAKe,IAAI,mBAAmBC,IAAI,kBAIvCgC,EAAO,kBAAC,EAAD,CAAWL,QAASA,IAAY,QCmBrCO,eArCA,SAAC,GAAiB,IAAfP,EAAc,EAAdA,QAoBd,OACI,6BACI,yBAAK3C,UAAU,UACX,kBAAC,IAAD,CAAMmD,GAAG,KACL,yBAAKnD,UAAU,QACX,yBAAKe,IAAI,qBAAqBC,IAAI,WAG1C,yBAAKhB,UAAU,OAAOC,MAAO,CAACmD,MAAOrF,IAAoB,QAAU,UAC/D,kBAAC,IAAD,CAAMoF,GAAG,IAAInD,UAAU,UAAvB,QA1BRjC,IACQ,oCACJ,kBAAC,IAAD,CAAMoF,GAAG,uBAAuBnD,UAAU,UAA1C,kBACA,yBAAKA,UAAU,iBACf,kBAAC,IAAD,CAAMmD,GAAG,IAAIX,QAAS,SAACpC,GAAD,OAAO7C,GAAO,WAChCoF,EAAQC,KAAK,SACb5C,UAAU,iBAFd,WAMI,oCAAE,yBAAKA,UAAU,iBACrB,kBAAC,IAAD,CAAMmD,GAAG,SAASnD,UAAU,UAA5B,UACA,kBAAC,IAAD,CAAMmD,GAAG,YAAYnD,UAAU,UAA/B,kBCgIDqD,G,MA/ID,SAAC,GAAiB,IAAfV,EAAc,EAAdA,QAEPW,EAAQC,mBAFa,EAKK9E,mBAAS,CACrC+E,MAAO,GACPC,aAAc,GACd3E,MAAO,GACP4E,SAAS,EACTC,aAAa,IAVU,mBAKpBC,EALoB,KAKVC,EALU,KAenBL,EAAiDI,EAAjDJ,MAAOM,EAA0CF,EAA1CE,SAAUH,EAAgCC,EAAhCD,YAAaD,EAAmBE,EAAnBF,QAAS5E,EAAU8E,EAAV9E,MAE3CiF,GAAkB,EAClBC,GAAqB,EAGnB1E,EAAe,SAACE,GAAD,OAAgB,SAACC,GAClCoE,EAAY,2BAAKD,GAAN,kBAAiBpE,EAAaC,EAAMC,OAAOC,WAIpDC,EAAe,SAACH,GAClBA,EAAMI,iBACFkE,GAAmBC,IACnBH,EAAY,2BAAKD,GAAN,IAAgB9E,OAAO,EAAO4E,SAAS,KAClDrH,EAAM,CAAEmH,QAAOM,aACV/G,MAAK,SAACgD,GN+BK,IAACkE,EAAMC,EAAQ1G,EM9BnBuC,EAAKlC,QACLgG,EAAY,2BAAKD,GAAN,IAAgB9E,MAAOiB,EAAKlC,QAAS6F,SAAS,MN6BpDO,EM1BQlE,EAAKoE,UN0BPD,EM1BkBnE,EAAKzD,KAAK8H,IN0BpB5G,EM1ByB,WACxCqG,EAAY,2BAAKD,GAAN,IAAgBD,aAAa,MN0B1C,qBAAXjG,SACPN,QAAQC,IAAI6G,GACZvG,aAAa0G,QAAQ,YAAaxH,KAAKC,UAAUmH,IACjDtG,aAAa0G,QAAQ,SAAUxH,KAAKC,UAAUoH,IAC9C1G,SM1BSN,OAAM,SAACC,GACJ0G,EAAY,2BAAKD,GAAN,IAAgB9E,MAAO,oBAAqB4E,SAAS,UAmFhF,OACI,yBAAK1D,UAAU,mBACX,yBAAKA,UAAU,eACX,yBAAKe,IAAI,oBAAoBC,IAAI,iCAErC,yBAAKhB,UAAU,gBACX,yBAAKA,UAAU,QACX,2CA5CJ,yBAAKA,UAAU,cAAcC,MAAO,CAAEC,QAASpB,EAAQ,QAAU,SACpEA,GAKG,yBAAKkB,UAAU,UAAUC,MAAO,CAAEC,QAASwD,EAAU,QAAU,OAAQY,MAAO,SAA9E,iBAOJ,0BAAMC,MAAM,aAAapE,SAAU,SAAAC,GAAC,OAAIR,EAAaQ,KACjD,2BAAOoE,QAAQ,aAAf,WACA,yBAAKxE,UAAU,aAAayE,IAAKnB,GAC7B,6BAAK,uBAAGtD,UAAU,oBAA2B,+BAC7C,2BAAOL,MAAO6D,EAAOnD,SAAUf,EAAa,SAAU2B,KAAK,QAAQyD,KAAK,QAAQxD,GAAG,YAAYyD,YAAY,sBACzG,6BA/CS,WACvB,IAAMC,EAASC,OACX,2JAEJ,GAAIrB,EAAMnB,OAAS,IAAMuC,EAAOE,KAAKtB,GAEjC,OAAQ,oCAAE,0BAAMxD,UAAU,eAAhB,oBAAsD,8BAEhE4E,EAAOE,KAAKtB,KACZO,GAAkB,GAuCbgB,GACD,6BACA,2BAAOP,QAAQ,OAAf,cACA,yBAAKxE,UAAU,cACX,6BAAK,uBAAGA,UAAU,eAAsB,+BACxC,2BAAOL,MAAOmE,EAAU7C,KAAK,WAAWZ,SAAUf,EAAa,YAAa4B,GAAG,MAAMwD,KAAK,WAAWC,YAAY,cAC/G,6BAxCY,WAC1B,GAAIb,EAAU,CACV,GAAIA,EAASzB,OAAS,EAClB,OACI,oCAAE,0BAAMrC,UAAU,eAAhB,sCAAwE,8BAI9EgE,GAAqB,GAiCpBgB,GACD,yCACA,yBAAKhF,UAAU,WACX,qCAGJ,kBAAC,IAAD,CAAMmD,GAAG,aAAT,iCAtEJQ,GACI5F,KACA4E,EAAQC,KAAK,UC8JdqC,EAjNE,WAAO,IAAD,EAEaxG,mBAAS,CACrCyG,KAAM,GACN1B,MAAO,GACPM,SAAU,GACVqB,OAAQ,GACRC,OAAQ,GACRtG,MAAO,GACPuG,SAAS,IATM,mBAEZzB,EAFY,KAEFC,EAFE,OAYsBpF,oBAAS,GAZ/B,mBAYd6G,EAZc,KAYIC,EAZJ,KAcXL,EAA0DtB,EAA1DsB,KAAM1B,EAAoDI,EAApDJ,MAAOM,EAA6CF,EAA7CE,SAAUqB,EAAmCvB,EAAnCuB,OAAQC,EAA2BxB,EAA3BwB,OAAQC,EAAmBzB,EAAnByB,QAASvG,EAAU8E,EAAV9E,MAEpDiF,GAAkB,EAClBC,GAAqB,EACrBwB,GAAmB,EACnBC,GAAiB,EA2DfC,EAAY,WACd,GAAI3B,GAAmBC,GAAsBwB,GAAoBC,GAAkBH,EAC/E,OAAO,6CAKThG,EAAe,SAACE,GAAD,OAAgB,SAACC,GACf,WAAfD,GACA+F,GAAe,GACf1B,EAAY,2BAAKD,GAAN,kBAAiBpE,EAAaC,EAAMC,OAAOC,UAGtDkE,EAAY,2BAAKD,GAAN,kBAAiBpE,EAAaC,EAAMC,OAAOC,WAMxDC,EAAe,SAAAH,GACjBA,EAAMI,iBACFkE,GAAmBC,GAAsBwB,GAAoBC,GAC7D5B,EAAY,2BAAKD,GAAN,IAAgB9E,OAAO,KAClCxB,EAAS,CAAE4H,OAAM1B,QAAOM,WAAUqB,SAAQC,WACrCrI,MAAK,SAACgD,GACCA,EAAK4F,QACL9B,EAAY,2BAAKD,GAAN,IAAgB9E,MAAOiB,EAAKlC,QAAS+H,SAAS,KAGzD/B,EAAY,2BACLD,GADI,IAEPsB,KAAM,GACNpB,SAAU,GACVqB,OAAQ,GACRC,OAAQ,GACR5B,MAAO,GACP1E,MAAO,GACPuG,SAAS,QAIpBnI,OAAM,SAACY,GACJ+F,EAAY,2BAAKD,GAAN,IAAgB9E,MAAO,qBAAsB8G,SAAS,SAIzExI,QAAQC,IAAI,SAAU0G,EAAiBC,EAAoBwB,EAAkBC,IAqB/ET,EAAwB,WAC1B,GAAIlB,EAAU,CACV,GAAIA,EAASzB,OAAS,EAClB,OACI,oCAAE,0BAAMrC,UAAU,eAAhB,sCAAwE,8BAI9EgE,GAAqB,IAK3Be,EAAqB,WACvB,IAAMH,EAASC,OACX,2JAEJ,GAAIrB,EAAMnB,OAAS,IAAMuC,EAAOE,KAAKtB,GAEjC,OAAQ,oCAAE,0BAAMxD,UAAU,eAAhB,oBAAsD,8BAEhE4E,EAAOE,KAAKtB,KACZO,GAAkB,IAKpB8B,EAAoB,WACtB,GAAIX,GAAQA,EAAK7C,OAAS,EACtB,OAAQ,oCAAE,0BAAMrC,UAAU,eAAhB,kCAAoE,8BAE9EkF,GAAQA,EAAK7C,OAAS,IACtBoD,GAAiB,IAInBK,EAAsB,WACxB,GAAIV,GAA6B,KAAlBA,EAAO/C,OAElB,OAAQ,oCAAE,0BAAMrC,UAAU,eAAhB,yBAA2D,8BAErEoF,GAA2B,IAAjBA,EAAO/C,SACjBmD,GAAmB,IAI3B,OACI,yBAAKxF,UAAU,gCACX,yBAAKA,UAAU,eACX,yBAAKe,IAAI,oBAAoBC,IAAI,iCAGrC,yBAAKhB,UAAU,gBACX,yBAAKA,UAAU,QACX,4CAnEJ,yBAAKA,UAAU,cAAcC,MAAO,CAAEC,QAASpB,EAAQ,QAAU,SACpEA,GAOG,yBAAKkB,UAAU,cAAcC,MAAO,CAAEC,QAASmF,EAAU,QAAU,SAAnE,wCACiC,kBAAC,IAAD,CAAMlC,GAAG,UAAT,eApHrC,0BAAMhD,SAAU,SAAAC,GAAC,OAAIR,EAAaQ,KAC9B,2BAAOoE,QAAQ,YAAf,UACA,yBAAKxE,UAAU,cACX,6BAAK,uBAAGA,UAAU,gBAAuB,+BACzC,2BAAOK,SAAUf,EAAa,QAASK,MAAOuF,EAAMjE,KAAK,OAAOC,GAAG,WAAWyD,YAAY,kBAAkBD,KAAK,cAC/G,6BACLmB,IACD,6BACA,2BAAOrB,QAAQ,aAAf,WACA,yBAAKxE,UAAU,cACX,6BAAK,uBAAGA,UAAU,oBAA2B,+BAC7C,2BAAOK,SAAUf,EAAa,SAAUK,MAAO6D,EAAOvC,KAAK,QAAQC,GAAG,YAAYyD,YAAY,mBAAmBD,KAAK,WACpH,6BACLK,IACD,6BAEA,2BAAOP,QAAQ,UAAf,YACA,yBAAKxE,UAAU,cACX,6BAAK,uBAAGA,UAAU,iBAAwB,+BAC1C,2BAAOK,SAAUf,EAAa,UAAWK,MAAOyF,EAAQnE,KAAK,SAASC,GAAG,SAASyD,YAAY,iBAAiBD,KAAK,YAClH,6BACLoB,IACD,6BACA,2CACA,yBAAK9F,UAAU,qBAEX,yBAAKA,UAAU,cACX,uCAAOL,MAAOwF,EAAQ9E,SAAUf,EAAa,UAAW2B,KAAK,QAAQC,GAAG,OAAOwD,KAAK,UAApF,QAAmG,SACnG,2BAAO1E,UAAU,OAAOwE,QAAQ,QAAO,6BAAK,uBAAGxE,UAAU,kBAE7D,+BACA,yBAAKA,UAAU,gBACX,uCAAOL,MAAOwF,EAAQ9E,SAAUf,EAAa,UAAW2B,KAAK,QAAQC,GAAG,SAASwD,KAAK,UAAtF,QAAqG,WACrG,2BAAO1E,UAAU,SAASwE,QAAQ,UAAS,6BAAK,uBAAGxE,UAAU,qBAG/D,6BAGN,2BAAOwE,QAAQ,OAAf,cACA,yBAAKxE,UAAU,cACX,6BAAK,uBAAGA,UAAU,eAAsB,+BACxC,2BAAOK,SAAUf,EAAa,YAAaK,MAAOmE,EAAU7C,KAAK,WAAWC,GAAG,MAAMyD,YAAY,WAAWD,KAAK,cAC/G,6BACLM,IACD,6BACCU,IACD,kBAAC,IAAD,CAAMvC,GAAG,UAAT,iBAAgC,iDCAjC4C,G,MA3EI,SAAC1H,GAAW,IAAD,EAGUI,mBAAS,CACzCuD,MAAO,KAJe,mBAGnBgE,EAHmB,KAGPC,EAHO,KAOlBjE,EAAUgE,EAAVhE,MAgBFkE,EAAmB,SAACC,GACtB,OAAI9H,EAAM+H,SAASD,GAEX,yBAAK5B,MAAM,OAAO/B,QAAS,SAAApC,GAAC,OAlBhB,SAACA,GACrB,IAAIiG,EAASjG,EAAEV,OAAO4G,UAEtB,GADAjI,EAAMkI,UAAUnG,EAAEV,OAAO4G,WACpBtE,EAAMwE,SAASH,GAIf,CACD,IAAIF,EAAMnE,EAAMyE,QAAQJ,GACxBjG,EAAEV,OAAOgH,UAAUC,OAAO,YAC1B3E,EAAM4E,OAAOT,EAAK,QANlB/F,EAAEV,OAAOgH,UAAUG,IAAI,YACvB7E,EAAMY,KAAKyD,GAOfJ,EAAc,CAAEjE,UAMwB8E,CAAgB1G,KAAK+F,EAAI,GAGzD,yBAAK5B,MAAM,iBAAiB4B,EAAI,IAGtCY,EAAgB,SAACZ,GACnB,OACI,yBAAK5B,MAAM,OACP,yBAAKA,MAAM,YACN2B,EAAiBC,GACjBD,EAAiBC,EAAM,IAK5B,yBAAK5B,MAAM,YACN2B,EAAiBC,EAAM,GACvBD,EAAiBC,EAAM,MAyBxC,OAAQ,oCAbA,yBAAK5B,MAAM,eACP,yBAAKA,MAAM,aAAY,sCACvB,yBAAKA,MAAM,SACNwC,EAAc,GACdA,EAAc,GACdA,EAAc,GACdA,EAAc,IACdA,EAAc,SC8JpBC,EA3NE,SAAC,GAAiB,IAAfrE,EAAc,EAAdA,QAAc,EAEMpE,qBAAWC,GAAvCyI,EAFsB,EAEtBA,cAAe3I,EAFO,EAEPA,SACvBlB,QAAQC,IAAI4J,EAAcjF,OACrBiF,GAAuD,IAAtCC,OAAOC,KAAKF,GAAe5E,QAC7CM,EAAQC,KAAK,KAGjB,IAAIwE,EAAc,GARY,EAiBM3I,mBAAS,CACzCyG,KAAM,GACNmC,IAAK,GACLlC,OAAQ,GACRnD,MAAO,GACPsD,kBAAmB,IAtBO,mBAiBvBgC,EAjBuB,KAiBXC,EAjBW,OAyBU9I,oBAAS,GAzBnB,mBAyBzB6G,EAzByB,KAyBRC,EAzBQ,KA2B1BE,GAAiB,EACjB+B,GAAgB,EAERtC,EAA6BoC,EAA7BpC,KAAMmC,EAAuBC,EAAvBD,IAAKlC,EAAkBmC,EAAlBnC,OAAQnD,EAAUsF,EAAVtF,MAmBzB1C,EAAe,SAACE,EAAY6B,GAAb,OAAqB,SAAC5B,GACvC,IAAIM,EAAOuH,EAAW9H,GACtBO,EAAKsB,GAAO5B,EAAMC,OAAOC,MACT,WAAbH,GACC+F,GAAe,GACfgC,EAAc,2BAAKD,GAAN,kBAAmB9H,EAAnB,YAAoCO,OAGrDwH,EAAc,2BAAKD,GAAN,kBAAmB9H,EAAnB,YAAoCO,QAsC/C0H,EAAa,SAACtB,GAChB,OACI,0BAAM5B,MAAM,gBACR,2BAAOmD,IAAI,QAAX,UACA,yBAAKnD,MAAM,cACP,6BAAK,uBAAGA,MAAM,gBAAuB,+BACrC,2BAAOtD,KAAK,OAAOZ,SAAUf,EAAa,OAAQ6G,GAAMjF,GAAG,OAAOvB,MAAOuF,EAAKiB,GAAMxB,YAAY,qBAC9F,6BA7BQ,SAACwB,GACvB,GAAIjB,EAAKiB,IAAQjB,EAAKiB,GAAK9D,OAAS,EAChC,OAAQ,oCAAE,0BAAMrC,UAAU,eAAhB,kCAAoE,8BAE9EkF,EAAKiB,IAAQjB,EAAKiB,GAAK9D,OAAS,IAChCoD,GAAiB,GAyBZI,CAAkBM,GACnB,6BACA,2BAAOuB,IAAI,OAAX,SACA,yBAAKnD,MAAM,cACP,6BAAK,uBAAGA,MAAM,iBAAwB,+BACtC,2BAAOtD,KAAK,SAASZ,SAAUf,EAAa,MAAO6G,GAAMjF,GAAG,MAAMvB,MAAO0H,EAAIlB,GAAMxB,YAAY,oBAC7F,6BA3BO,SAACwB,GACtB,OAAIkB,EAAIlB,IAAQwB,OAAON,EAAIlB,IAAQ,IACvB,oCAAE,0BAAMnG,UAAU,eAAhB,WAA6C,8BAEvDqH,EAAIlB,IAAQwB,OAAON,EAAIlB,IAAQ,EACvB,oCAAE,0BAAMnG,UAAU,eAAhB,cAAgD,mCAE1DqH,EAAIlB,GAAO,GAAKwB,OAAON,EAAIlB,IAAQ,KAAOwB,OAAON,EAAIlB,IAAQ,IAC7DqB,GAAgB,IAoBXI,CAAiBzB,GAClB,6BACA,2CACA,yBAAK5B,MAAM,qBACP,yBAAKA,MAAM,cACP,yCAAOtD,KAAK,QAAQC,GAAI,OAAS,CAACiF,GAAMzB,KAAM,SAAW,CAACyB,GAAMxG,MAAM,OAAOU,SAAUf,EAAa,SAAU6G,IAAqB,SAAXhB,EAAoB,UAAY,KACxJ,2BAAOZ,MAAM,OAAOC,QAAS,OAAS,CAAC2B,IACnC,6BAAK,uBAAG5B,MAAM,kBAGtB,+BACA,yBAAKA,MAAM,gBACP,yCAAOtD,KAAK,QAAQC,GAAI,SAAW,CAACiF,GAAMzB,KAAM,SAAW,CAACyB,GAAM9F,SAAUf,EAAa,SAAU6G,GAAMxG,MAAM,UAAwB,SAAXwF,EAAoB,UAAY,KAC5J,2BAAOZ,MAAM,SAASC,QAAS,SAAW,CAAC2B,IACvC,6BAAK,uBAAG5B,MAAM,qBAGpB,+BAcZsD,EAAgB,WAClB,GAAGpC,GAAkB+B,GAAiBlC,EAClC,OAAO,4BAAQtF,UAAU,UAAUwC,QAAS,SAAApC,GAAC,OAX3B,WACtB,IAAMsC,EAAY,2BAAQuE,GAAkBK,GACxC7B,GAAkB+B,GAAiBlC,IACnChH,EAAS,CAAE2C,KAAM,wBAAyBwB,WAAYC,IACtDC,EAAQC,KAAK,kBAOoCkF,KAA1C,qBAmEf,OACI,yBAAKvD,MAAM,aA1ME,WACb,IAAIxC,EAAakF,EAAcjF,MAC/BoF,EAAc,YAAI,IAAInF,MAAM,KAAKd,KAAI,SAACe,EAAKb,GACvC,OAA0C,IAAnCU,EAAW,QAAUV,EAAM,OAwMjC0G,GACD,kBAAC,EAAD,CAAYxB,UAAW,SAAAyB,GAAM,OArLZ,SAAC3B,GACtB,GAAKrE,EAAMwE,SAASH,GAMf,CACD,IAAIF,EAAMnE,EAAMyE,QAAQJ,GACxBnB,EAAK0B,OAAOT,EAAK,GACjBkB,EAAIT,OAAOT,EAAK,GAChBhB,EAAOyB,OAAOT,EAAK,GACnBnE,EAAM4E,OAAOT,EAAK,QAVlBjB,EAAKtC,KAAK,IACVyE,EAAIzE,KAAK,IACTuC,EAAOvC,KAAK,IACZZ,EAAMY,KAAKyD,GASfkB,EAAc,2BAAKD,GAAN,IAAkBpC,OAAMmC,MAAKlC,SAAQnD,WAuKbiG,CAAiBD,IAAS5B,SAAUgB,IAjEhD,WACzB,IAAIjI,EAAa8H,EAAc9H,WAC/B,OACI,yBAAKoF,MAAM,mBACP,yBAAKA,MAAM,QAAX,mBAGA,yBAAKA,MAAM,oBACP,6BACI,4CACA,8BAAO0C,EAAc1F,UAEzB,6BACI,wCACA,8BAAO0F,EAActI,SAEzB,6BACI,sCACA,8BAAOsI,EAAcrI,cAEzB,6BACI,wCACA,+BAAQ,IAAMO,EAAWyC,WAAWF,OAAO,GAAK,KAAO,MAASvC,EAAW0C,WAAc,IAAIH,OAAO,GAAK,KAAO,IAAMvC,EAAW2C,WAAWJ,OAAO,KAEvJ,6BACI,2CACA,8BA9GTM,EAAMb,KAAI,SAAC+G,EAAM7G,GACpB,OAAIW,EAAMK,OAAShB,EAAM,EACd6G,EAAO,IAGPA,QA6GP,yBAAK3D,MAAM,gBACNW,EAAK/D,KAAI,SAACuD,EAAMrD,GACb,OAAOoG,EAAWpG,OAG1B,6BACI,8CACA,8BAAOW,EAAMK,SAGjB,6BACI,wCACA,8BAAO,SAAP,IAAkBL,EAAMK,OAAS4E,EAAc1E,OAGnD,6BACI,+CACA,8BAAO,SAAP,IAAmBP,EAAMK,QAAU,EAAI,IAAM,IAGjD,6BACI,iDACA,8BAAO,SAAP,IAAmBL,EAAMK,OAAS4E,EAAc1E,KAAwB,IAAfP,EAAMK,SAElEwF,KAYJM,KC9BEC,G,MAtLC,SAAC,GAAiB,IAAfzF,EAAc,EAAdA,QAEPsE,EAAkB1I,qBAAWC,GAA7ByI,cAEHA,GAAuD,IAAtCC,OAAOC,KAAKF,GAAe5E,QAC7CM,EAAQC,KAAK,KALY,MASGnE,mBAAS,CACrC4J,KAAM,GACNC,IAAK,GACLxJ,MAAO,GACPuG,SAAS,IAbgB,mBAStBzB,EATsB,KASZC,EATY,KAgBrBwE,EAA8BzE,EAA9ByE,KAAMC,EAAwB1E,EAAxB0E,IAEVC,GAFkC3E,EAAnByB,QAAmBzB,EAAV9E,OAEL,GACnB0J,GAAgB,EA2EdlJ,EAAe,SAACE,GAAD,OAAgB,SAACC,GAClCoE,EAAY,2BAAKD,GAAN,kBAAiBpE,EAAaC,EAAMC,OAAOC,WAIpDC,EAAe,SAACH,GAElB,GADAA,EAAMI,iBACF2I,GAAiBD,EAAkB,CACnC,IAAI7F,EAAY,eAAQuE,GACxBvE,EAAahE,OAASuI,EAAc7C,IC3GtB,SAACqE,GAEvB,GAAI9K,aAAaK,QAAQ,aAAc,CACnC,IAAM0K,EAAU7L,KAAKoB,MAAMN,aAAaK,QAAQ,WAC1CiG,EAAQpH,KAAKoB,MAAMN,aAAaK,QAAQ,cAG9C,OAFAZ,QAAQC,IAAR,UAAejB,EAAf,gBAA0BsM,EAA1B,gBAEOlM,MAAM,GAAD,OAAIJ,EAAJ,gBAAesM,EAAf,eAAqC,CAC7CjM,OAAQ,OACRC,QAAS,CACLC,OAAQ,mBACR,cAAgB,UAAUsH,EAC1B,eAAgB,oBAEpBrH,KAAMC,KAAKC,UAAU2L,KAExB1L,MAAK,SAACC,GAEC,OADJI,QAAQC,IAAIL,GACDA,EAASC,UAEvBC,OAAM,SAACC,GAAUC,QAAQC,IAAIF,ODwF1BwL,CAAW,eAAKjG,IACX3F,MAAK,WACF4F,EAAQC,KAAK,2BAEhB1F,OAAM,SAAAY,GACH+F,EAAY,2BAAKD,GAAN,IAAgB9E,MAAO,gCA+DlD,OACI,6BAASkB,UAAU,qBA9Ff,yBAAKA,UAAU,eACX,yBAAKA,UAAU,YACX,yBAAKe,IAAI,4BAA4BC,IAAI,iBAE7C,yBAAKhB,UAAU,eACX,6BAAK,yBAAKe,IAAI,8BAA8BC,IAAI,WAChD,6BAAK,yBAAKD,IAAI,6BAA6BC,IAAI,UAC/C,6BAAK,yBAAKD,IAAI,oCAAoCC,IAAI,iBACtD,6BAAK,yBAAKD,IAAI,wCAAwCC,IAAI,uBAqClE,yBAAKhB,UAAU,kBACX,uCACA,yDACA,0BAAMA,UAAU,eAAeG,SAAU,SAAAC,GAAC,OAAIR,EAAaQ,KACvD,2BAAOoE,QAAQ,eAAf,sBAAuD,6BACvD,2BAAOvD,KAAK,SAASC,GAAG,cAAcb,SAAUf,EAAa,QAASqF,YAAY,wBAClF,6BA7GU,WACtB,GAAI0D,IAASA,EAAKhG,OAAS,IAAMgG,EAAKhG,OAAS,IAC3C,OAAQ,oCAAE,0BAAMrC,UAAU,eAAhB,wBAA0D,8BAEpEqI,GAAwB,KAAhBA,EAAKhG,SACbkG,GAAmB,GAyGVK,GACD,6BACA,2BAAOpE,QAAQ,QAAQxE,UAAU,aAAjC,cACA,yBAAKA,UAAU,wBACX,yBAAKA,UAAU,YACX,yBAAKA,UAAU,aACX,4BAAQkB,GAAG,SA7E/B,oCACI,2CACA,4CACA,yCACA,yCACA,uCACA,wCACA,wCACA,0CACA,6CACA,2CACA,4CACA,+CAqEY,uBAAGlB,UAAU,sBACb,yBAAKA,UAAU,SACX,yBAAKe,IAAI,sBAAsBC,IAAI,YAI3C,yBAAKhB,UAAU,YACX,yBAAKA,UAAU,YACX,gCA1GpB,oCACI,wCACA,wCACA,wCACA,wCACA,wCACA,wCACA,wCACA,wCACA,2CAqGY,yBAAKA,UAAU,SACX,yBAAKe,IAAI,sBAAsBC,IAAI,aAI/C,2BAAOwD,QAAQ,MAAMxE,UAAU,aAA/B,YACA,yBAAKA,UAAU,aACX,2BAAOiB,KAAK,SAASC,GAAG,MAAMb,SAAUf,EAAa,SACrD,qDAnIK,WACrB,GAAIgJ,IAAQA,EAAIjG,OAAQ,GAAKiG,EAAIjG,OAAQ,GACrC,OAAQ,oCAAE,0BAAMrC,UAAU,eAAhB,qBAAuD,+BAEjEqI,GAAwB,IAAfC,EAAIjG,QAA+B,IAAfiG,EAAIjG,SACjCmG,GAAgB,GAgIPK,GA/CK,WAClB,GAAGL,GAAiBD,EAChB,OAAO,4BAAQvI,UAAU,WAAlB,WA8CE6H,QExKRiB,EAAU,uCAAG,WAAOL,GAAP,iBAAAlM,EAAA,0DAElBoB,aAAaK,QAAQ,aAFH,uBAGZ0K,EAAU7L,KAAKoB,MAAMN,aAAaK,QAAQ,WAC1CiG,EAAQpH,KAAKoB,MAAMN,aAAaK,QAAQ,cAJ5B,SAMLxB,MAAM,GAAD,OAAIJ,EAAJ,wBAAuBsM,GAAW,CAChDjM,OAAQ,MACRC,QAAS,CACLC,OAAQ,mBACR,cAAiB,UAAYsH,EAC7B,eAAgB,sBAErBlH,MAAK,SAACC,GACL,OAAOA,EAASC,UAEfC,OAAM,SAACC,GAAUC,QAAQC,IAAIF,MAhBhB,mFAAH,sDAoBV4L,EAAY,uCAAG,iCAAAxM,EAAA,yDAAQ6H,EAAR,EAAQA,KAC5BzG,aAAaK,QAAQ,aADD,uBAEd0K,EAAU7L,KAAKoB,MAAMN,aAAaK,QAAQ,WAC1CiG,EAAQpH,KAAKoB,MAAMN,aAAaK,QAAQ,cAH1B,SAKPxB,MAAM,GAAD,OAAIJ,EAAJ,wBAAuBsM,EAAvB,0BAAwD,CACtEjM,OAAQ,OACRC,QAAS,CACLC,OAAQ,mBACR,cAAiB,UAAYsH,EAC7B,eAAgB,oBAEpBrH,KAAMC,KAAKC,UAAU,CAACsH,UACvBrH,MAAK,SAACC,GACL,OAAOA,EAASC,UAEfC,OAAM,SAACC,GAAUC,QAAQC,IAAIF,MAhBd,mFAAH,sDCoKV6L,G,MAvLC,WAAO,IAAD,EAE4BvK,mBAAS,CACnDwK,cAAe,GACfpK,SAAS,EACT8G,QAAS,KALK,mBAEXuD,EAFW,KAEQC,EAFR,OAOuB1K,oBAAS,GAPhC,mBAOX2K,EAPW,KAOGC,EAPH,KAQKxK,GAAqBqK,EAApCD,cAAoCC,EAArBrK,SAAS8G,EAAYuD,EAAZvD,QAEhC2D,qBAAU,WACNC,MACF,CAACH,IAEH,IAAMG,EAAgB,WAClBJ,EAAiB,2BAAKD,GAAN,IAAyBrK,QAAS,8BAA+B8G,QAAS,MAC1FmD,IACK/L,MAAK,SAACgD,GACCA,EAAKjB,MACLqK,EAAiB,2BAAKD,GAAN,IAAyBrK,QAAS,GAAI8G,QAAS5F,EAAKjB,SAGpEqK,EAAiB,2BAAKD,GAAN,IAAyBrK,QAAS,GAAI8G,QAAS,GAAIsD,cAAc,eAAMlJ,SAG9F7C,OAAM,SAACC,GACJgM,EAAiB,2BAAKD,GAAN,IAAyBrK,QAAS,GAAI8G,QAAS,4BAA6BsD,cAAe,UAwBjHO,EAAqB,SAACtE,GACxB,OAAOA,EAAK/D,KAAK,SAAAsI,GACb,OAAO,0BAAMzJ,UAAU,QAAQyJ,EAAxB,SAwHf,OACI,yBAAKlF,MAAM,qBAjBP,yBAAKvE,UAAU,iBAAf,mBA7HiB,WACrB,GAAInB,EACA,OAAQ,yBAAKmB,UAAU,WAClBnB,GA6IJ6K,GACA5K,MAvIS,WACd,GAAI6G,EACA,OAAQ,yBAAK3F,UAAU,WAClB2F,GAoIEgE,GAAY,KAvGZzC,OAAOC,KAAK+B,EAAkBD,eAC7B9H,KAAI,SAAAG,GACZ,IAAI8C,EAAM8E,EAAkBD,cAAc3H,GAAK8C,IAC3CjF,EAAa,IAAII,KAAK2J,EAAkBD,cAAc3H,GAAKnC,YAC3DqC,EAAU,IAAIjC,KAAK2J,EAAkBD,cAAc3H,GAAKE,SACxDoI,EAAY,IAAIrK,KAAK2J,EAAkBD,cAAc3H,GAAKsI,WAK9D,OAJAzK,GAAc,IAAMA,EAAWyC,WAAWF,OAAO,GAAK,KAAO,MAASvC,EAAW0C,WAAc,IAAIH,OAAO,GAAK,KAAO,IAAMvC,EAAW2C,WAAWJ,OAAO,GACzJF,GAAW,IAAM,IAAIjC,KAAKiC,GAASC,YAAYC,OAAO,GAAK,KAAO,IAAM,IAAInC,KAAKiC,GAASG,cAAcD,OAAO,GAC/GkI,GAAa,IAAM,IAAIrK,KAAKqK,GAAWnI,YAAYC,OAAO,GAAK,KAAO,IAAM,IAAInC,KAAKqK,GAAWjI,cAAcD,OAAO,GAGjH,yBAAK6C,MAAM,UACP,yBAAKA,MAAM,gBACP,yBAAKxD,IAAI,qBAAqBC,IAAI,aAGtC,yBAAKuD,MAAM,eACP,yBAAKA,MAAM,iBACP,4BAAI,wCAAJ,YACA,kDAAwB2E,EAAkBD,cAAc3H,GAAKuI,gBAGjE,yBAAKtF,MAAM,eAEP,yBAAKA,MAAM,OACP,6BACI,2CACA,8BAAO2E,EAAkBD,cAAc3H,GAAKC,WAIpD,yBAAKgD,MAAM,YACP,wCACCiF,EAAmBN,EAAkBD,cAAc3H,GAAK4D,OAE7D,yBAAKX,MAAM,YACP,0CACCiF,EAAmBN,EAAkBD,cAAc3H,GAAK6D,SAG7D,yBAAKZ,MAAM,OACP,6BACI,uCACA,8BAAO2E,EAAkBD,cAAc3H,GAAK3C,SAEhD,6BACI,qCACA,8BAAOuK,EAAkBD,cAAc3H,GAAK1C,eAIpD,yBAAK2F,MAAM,OACP,6BACI,0CACA,8BAAO/C,IAEX,6BACI,4CACA,8BAAOoI,KAIf,yBAAKrF,MAAM,cACP,6BACI,gDACA,8BAAOpF,MAInB,yBAAKa,UAAU,iBACX,yBAAKA,UAAU,gBACX,8BAAM,uBAAGA,UAAU,cAAc8J,MAAM,gBAAgBtH,QAAS,SAAApC,GAAC,OAxFjE,SAACgE,GACzB2E,EAAa,CAAC3E,QAAMrH,MAAK,SAACgD,GACnBA,EAAKjC,OACJqL,EAAiB,2BAAID,GAAL,IAAuBvD,QAAQ,qCAC/C0D,GAAiB,IAGjBA,GAAiB,MAGxBnM,OAAM,SAACC,GACJgM,EAAiB,2BAAID,GAAL,IAAuBvD,QAAQ,qCAC/C0D,GAAiB,MA4EsEU,CAAoB3F,cAkBxF,WACvB,GAA2D,GAAvD8C,OAAOC,KAAK+B,EAAkBD,eAAe5G,SAAgBxD,EAC7D,OACI,yBAAKmB,UAAU,eAAf,8BAaHgK,M,QC7JEC,EApBM,SAAC,GAAuC,IAA1BC,EAAyB,EAApCC,UAAyBC,EAAW,6BACxD,OACI,kBAAC,IAAD,iBACQA,EADR,CAEIC,OAAQ,SAAAhM,GAAK,OACTN,IACI,kBAACmM,EAAc7L,GAEX,kBAAC,IAAD,CACI8E,GAAI,CACAmH,SAAU,SACVC,MAAO,CAAEC,KAAMnM,EAAMoM,kBCCtCC,EAhBK,SAACH,EAAMI,GAEvB,OADaA,EAAR1J,MAGD,IAAK,wBAED,OADmB0J,EAAdlI,WAGT,IAAK,yBACD,MAAO,GAEX,QACI,OAAO8H,ICCbK,EAAe,GA0BNC,EAvBA,WAAO,IAAD,EAGiBC,qBAAWC,EAAaH,GAHzC,mBAGV3D,EAHU,KAGK3I,EAHL,KAKjB,OACI,kBAAC,IAAD,KACI,kBAAC,EAAD,MACA,kBAACE,EAAYwM,SAAb,CAAsBrL,MAAO,CAACsH,gBAAc3I,aACxC,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO2M,OAAK,EAACC,KAAK,IAAIf,UAAWpH,IACjC,kBAAC,IAAD,CAAOkI,OAAK,EAACC,KAAK,IAAIf,UAAWpH,IACjC,kBAAC,IAAD,CAAOkI,OAAK,EAACC,KAAK,SAASf,UAAW9G,IACtC,kBAAC,IAAD,CAAO4H,OAAK,EAACC,KAAK,YAAYf,UAAWlF,IACzC,kBAAC,EAAD,CAAciG,KAAK,oBAAoBD,OAAK,EAACd,UAAWnD,IACxD,kBAAC,EAAD,CAAckE,KAAK,uBAAuBD,OAAK,EAACd,UAAWnB,IAC3D,kBAAC,EAAD,CAAckC,KAAK,gBAAgBD,OAAK,EAACd,UAAW/B,QCrBpD+C,QACW,cAA7BzN,OAAO+M,SAASW,UAEe,UAA7B1N,OAAO+M,SAASW,UAEhB1N,OAAO+M,SAASW,SAASC,MACvB,2D,MCZNC,IAASjB,OACL,kBAAC,EAAD,MACFkB,SAASC,eAAe,SD2HpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB5O,MAAK,SAAA6O,GACJA,EAAaC,gBAEd3O,OAAM,SAAAY,GACLV,QAAQU,MAAMA,EAAMD,c","file":"static/js/main.04c78b3f.chunk.js","sourcesContent":["export const API = \"http://127.0.0.1:8000/api/\";","import { API } from '../backend'\r\n\r\n\r\nexport const login = async (user) => {\r\n    return await fetch(`${API}auth/login`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            \"Content-Type\": 'application/json'\r\n\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then((response) => {\r\n            return response.json()\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"Falied to Login\")\r\n        })\r\n}\r\n\r\nexport const register = async (user) => {\r\n    return await fetch(`${API}auth/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            \"Content-Type\": 'application/json'\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then((response) => {\r\n            return response.json()\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"Falied to Register\")\r\n        })\r\n}\r\n\r\nexport const logout = async (next) => {\r\n    if (typeof window !== undefined) {\r\n        localStorage.removeItem('authToken')\r\n        next()\r\n    }\r\n\r\n    return await fetch(`${API}auth/logout`, {\r\n        method: 'GET',\r\n    })\r\n        .then((response) => { response.json({ message: \"Logout Successfully\" }) })\r\n        .catch((error) => { console.log(\"Failed to Logout\") })\r\n}\r\n\r\n\r\nexport const updatePassword = async (user) => {\r\n    return await fetch(`${API}user/update-password`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n    .then((response) => {response.json()})\r\n    .catch((error) =>{console.log(\"Failed to Update Password\")})\r\n}\r\n\r\n\r\n\r\nexport const authenticate = (token,UserID, next) => {\r\n    if (typeof window !== \"undefined\") {\r\n        console.log(UserID)\r\n        localStorage.setItem(\"authToken\", JSON.stringify(token))\r\n        localStorage.setItem(\"UserID\", JSON.stringify(UserID))\r\n        next()\r\n    }\r\n}\r\n\r\nexport const isAuthenticated = () => {\r\n    if (typeof window == \"undefined\") {\r\n        return false\r\n    }\r\n    if (localStorage.getItem(\"authToken\")) {\r\n        return JSON.parse(localStorage.getItem(\"authToken\"));\r\n    }\r\n    else {\r\n        return false\r\n    }\r\n} ","import React from 'react';\r\n\r\nexport default React.createContext();","import React, { useState, useContext } from 'react';\r\nimport { searchBus } from '../bus/helper';\r\nimport { isAuthenticated } from '../auth/helper';\r\nimport UserContext from '../../UserContext/UserContext';\r\n\r\n\r\nconst SearchBus = (props) => {\r\n\r\n    const { dispatch } = useContext(UserContext)\r\n\r\n    const [searchData, setSearchData] = useState({\r\n        Bus_ID: '',\r\n        Source: '',\r\n        Destination: '',\r\n        loading: false,\r\n        Error: '',\r\n        BusData: '',\r\n        didRender: false\r\n    })\r\n\r\n    let [travelDate, setTravelDate] = useState({ TravelDate: '' })\r\n    let { TravelDate } = travelDate\r\n    const { Source, Destination, loading, didRender, Error, BusData } = searchData\r\n\r\n    const date = new Date()\r\n\r\n    const handleChange = (inputField) => (event) => {\r\n        console.log(inputField)\r\n        if (inputField === 'TravelDate') {\r\n            TravelDate = new Date(event.target.value)\r\n            console.log(travelDate, event.target.value)\r\n            setTravelDate({ TravelDate })\r\n            console.log(TravelDate)\r\n\r\n        }\r\n        else {\r\n            setSearchData({ ...searchData, [inputField]: event.target.value })\r\n        }\r\n    }\r\n\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        setSearchData({ ...searchData, loading: true, Error: '', didRender: false })\r\n        searchBus({ Source, Destination, TravelDate })\r\n            .then((data) => {\r\n                if (data.Error) {\r\n                    setSearchData({ ...searchData, Error: data.Error, loading: false, BusData: [], didRender: false })\r\n                }\r\n                else {\r\n                    setSearchData({ ...searchData, didRender: true, loading: false, Error: '', BusData: data })\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                setSearchData({ ...searchData, Error: \"Failed to load data\", loading: false, BusData: [], didRender: false })\r\n            })\r\n    }\r\n\r\n    const errorMessage = () => {\r\n        return (<div className=\"messageHandle\" style={{ display: Error ? \"block\" : \"none\" }}>\r\n            {Error}\r\n        </div>)\r\n    }\r\n\r\n    const loadingData = () => {\r\n        return (<div className=\"messageHandle\" style={{ display: loading ? \"block\" : \"none\" }}>\r\n            Loading data...\r\n        </div>)\r\n    }\r\n\r\n    const handleBooking = (BusDetails) => {\r\n        let newBusDetail = { ...BusDetails }\r\n        newBusDetail.TravelDate = TravelDate\r\n        if (isAuthenticated()) {\r\n            dispatch({ type: \"STORE_BOOKING_DETAILS\", BusDetails: newBusDetail })\r\n            props.history.push('/user/book-ticket')\r\n        }\r\n        else {\r\n            props.history.push('/login')\r\n        }\r\n    }\r\n\r\n    const AvailableSeatInfo = (bus) => {\r\n        let totalSeats = bus.Seats\r\n        let AvailableSeats = [...new Array(24)].map((arr, idx) => {\r\n            return totalSeats['Seat' + (idx + 1)] !== true ? true : false\r\n        })\r\n        return AvailableSeats.filter((Seat) => Seat === true).length\r\n    }\r\n\r\n    const performRender = () => {\r\n\r\n        if (didRender) {\r\n            return (\r\n                <div className=\"bus-details\">\r\n                    <ul>\r\n                        <li>\r\n                            <ul>\r\n                                <li>Bus Type</li>\r\n                                <li>Time</li>\r\n                                <li>Date</li>\r\n                                <li>Available</li>\r\n                                <li>Fare</li>\r\n                                <li></li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>{BusData.map((bus, idx) => {\r\n                            return (<ul key={idx}>\r\n                                <li>{bus.BusType}</li>\r\n                                <li>{('0' + new Date(bus.Arrival).getHours()).slice(-2) + ':' + ('0' + new Date(bus.Arrival).getMinutes()).slice(-2)}</li>\r\n                                <li>{('0' + TravelDate.getDate()).slice(-2) + '-' + ('0' + ((+TravelDate.getMonth()) + 1)).slice(-2) + '-' + ('0' + TravelDate.getYear()).slice(-2)}</li>\r\n                                <li>{AvailableSeatInfo(bus)}</li>\r\n                                <li>{bus.Fare}</li>\r\n                                <li onClick={e => handleBooking(bus)} className=\"viewSeatBtn\">View Seats</li>\r\n                            </ul>\r\n                            )\r\n                        })}\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    const renderForm = () => {\r\n        return (<>\r\n            <div className=\"text-info\">\r\n                <h2>Find a Tour</h2>\r\n                <p>Where would you like to go ?</p>\r\n                {errorMessage()}\r\n                {loadingData()}\r\n            </div>\r\n            <div className=\"search-form\">\r\n                <form onSubmit={e => handleSubmit(e)}>\r\n                    <div className=\"location\">\r\n                        <div className=\"source-location\">\r\n                            <div className=\"cities\">\r\n                                <div className=\"city-list\">\r\n                                    <select onChange={handleChange(\"Source\")}>\r\n                                        <option value=\"\">Select City</option>\r\n                                        <option value=\"Chennai\">Chennai</option>\r\n                                        <option value=\"Hyderabad\">Hyderabad</option>\r\n                                        <option value=\"Pune\">Pune</option>\r\n                                        <option value=\"Delhi\">Delhi</option>\r\n                                        <option value=\"Banglore\">Banglore</option>\r\n                                    </select>\r\n                                    <div className=\"label-from\"><span>From</span></div>\r\n                                </div>\r\n                                <div className=\"search-image\">\r\n                                    <div className=\"division-line\"></div>\r\n                                    <div className=\"city-image\">\r\n                                        <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"city\"\r\n                                            className=\"svg-inline--fa fa-city fa-w-20\" role=\"img\"\r\n                                            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\">\r\n                                            <path fill=\"currentColor\"\r\n                                                d=\"M616 192H480V24c0-13.26-10.74-24-24-24H312c-13.26 0-24 10.74-24 24v72h-64V16c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v80h-64V16c0-8.84-7.16-16-16-16H80c-8.84 0-16 7.16-16 16v80H24c-13.26 0-24 10.74-24 24v360c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V216c0-13.26-10.75-24-24-24zM128 404c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm128 192c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12V76c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 288c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40z\">\r\n                                            </path>\r\n                                        </svg>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"source-location\">\r\n                            <div className=\"cities\">\r\n                                <div className=\"city-list\">\r\n                                    <select onChange={handleChange(\"Destination\")}>\r\n                                        <option value=\"\">Select City</option>\r\n                                        <option value=\"Chennai\">Chennai</option>\r\n                                        <option value=\"Hyderabad\">Hyderabad</option>\r\n                                        <option value=\"Delhi\">Delhi</option>\r\n                                        <option value=\"Pune\">Pune</option>\r\n                                        <option value=\"Banglore\">Banglore</option>\r\n                                    </select>\r\n                                    <div className=\"label-from to\"><span>To</span></div>\r\n                                </div>\r\n                                <div className=\"search-image\">\r\n                                    <div className=\"division-line\"></div>\r\n                                    <div className=\"city-image\">\r\n                                        <img src=\"/images/drop.png\" alt=\"drop\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <div className=\"onward\">\r\n                            <div className=\"dates-label\"><span>Onward</span></div>\r\n                            <input type=\"date\" onChange={handleChange(\"TravelDate\")} id=\"onward-date\" />\r\n                        </div>\r\n\r\n                    </div>\r\n                    <button className=\"search-btn\">Search Bus</button>\r\n                </form>\r\n            </div>\r\n        </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <section className=\"search-section\">\r\n                {renderForm()}\r\n            </section>\r\n\r\n            {performRender()}\r\n\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default SearchBus;","import { API } from '../backend'\r\n\r\n\r\nexport const searchBus = ({Source,Destination,travelDate}) => {\r\n    return fetch(`${API}bus/search/${Source}/${Destination}`,{\r\n        method:'GET'\r\n    })\r\n    .then((response)=>{ \r\n        return response.json()\r\n    })\r\n    .catch((err)=>{ console.log(err)})\r\n}\r\n\r\n","import React,{useState} from 'react';\r\nimport SearchBus from './SearchBus'\r\nimport '../stylesheets/style.css'\r\n\r\nconst Home = ({history}) => {\r\n    \r\n\r\n    const [toggle,setToggle] = useState(false)\r\n\r\n    return ( <>\r\n            <div className=\"main-content\">\r\n                <div className=\"content-text\">\r\n                    <div className=\"title\">\r\n                        <h1>Comfort and Style<br /> Over Every Mile</h1>\r\n                        <p>BusExpress is the leading go-to website for booking bus online.</p>\r\n                        <button onClick={e=>setToggle(!toggle)} className=\"book-btn\">Book Ticket</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-image\">\r\n                    <img src=\"./images/bus.svg\" alt=\"bus station\" />\r\n                </div>\r\n            </div>\r\n        \r\n            {toggle?<SearchBus history={history} />:null}\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { isAuthenticated, logout } from '../auth/helper'\r\nimport '../stylesheets/style.css'\r\n\r\nconst Navbar = ({ history }) => {\r\n\r\n    const renderMenuItems = () => {\r\n        if (isAuthenticated()) {\r\n            return (<>\r\n                <Link to=\"/user/ticket-history\" className=\"navBtn\">Ticket History</Link>\r\n                <div className=\"divisionLine\"></div>\r\n                <Link to=\"/\" onClick={(e) => logout(() => {\r\n                    history.push('/')\r\n                })} className=\"navBtn logout\">Logout</Link>\r\n            </>)\r\n        }\r\n        else {\r\n            return (<><div className=\"divisionLine\"></div>\r\n                <Link to=\"/login\" className=\"navBtn\">Log in</Link>\r\n                <Link to=\"/register\" className=\"navBtn\">Sign up</Link>\r\n            </>)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <nav>\r\n            <div className=\"header\">\r\n                <Link to=\"/\">\r\n                    <div className=\"logo\">\r\n                        <img src=\"../images/logo.svg\" alt=\"logo\" />\r\n                    </div>\r\n                </Link>\r\n                <div className=\"menu\" style={{width: isAuthenticated() ? \"360px\" : \"300px\"}}>\r\n                    <Link to=\"/\" className=\"navBtn\">Home</Link>\r\n                    {renderMenuItems()}\r\n                </div>\r\n            </div>\r\n        </nav >\r\n    )\r\n}\r\n\r\nexport default withRouter(Navbar);","import React, { useState, useRef } from 'react';\r\nimport { login, authenticate, isAuthenticated } from \"../auth/helper\";\r\nimport { Link } from \"react-router-dom\";\r\nimport '../stylesheets/authPanel.css';\r\n\r\nconst Login = ({ history }) => {\r\n\r\n    const email = useRef()\r\n\r\n\r\n    const [formData, setFormData] = useState({\r\n        Email: '',\r\n        UserPassword: '',\r\n        Error: '',\r\n        Loading: false,\r\n        didRedirect: false,\r\n\r\n    })\r\n\r\n\r\n    const { Email, Password, didRedirect, Loading, Error } = formData\r\n\r\n    let isEmailVerified = false,\r\n        isPasswordVerified = false\r\n\r\n\r\n    const handleChange = (inputField) => (event) => {\r\n        setFormData({ ...formData, [inputField]: event.target.value })\r\n    }\r\n\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        if (isEmailVerified && isPasswordVerified) {\r\n            setFormData({ ...formData, Error: false, Loading: true })\r\n            login({ Email, Password })\r\n                .then((data) => {\r\n                    if (data.message) {\r\n                        setFormData({ ...formData, Error: data.message, Loading: false })\r\n                    }\r\n                    else {\r\n                        authenticate(data.authToken, data.user._id, () => {\r\n                            setFormData({ ...formData, didRedirect: true })\r\n                        })\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    setFormData({ ...formData, Error: \"Failed to login.!\", Loading: false })\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    const conductRedirect = () => {\r\n        if (didRedirect) {\r\n            if (isAuthenticated()) {\r\n                history.push('/');\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    \r\n    const emailValidateError = () => {\r\n        const regexp = RegExp(\r\n            /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n        );\r\n        if (Email.length > 0 && !regexp.test(Email)) {\r\n\r\n            return (<><span className=\"message-box\" >Email is Invalid</span><br/></>)\r\n        }\r\n        if (regexp.test(Email)) {\r\n            isEmailVerified = true\r\n        }\r\n\r\n    }\r\n\r\n    const passwordValidateError = () => {\r\n        if (Password) {\r\n            if (Password.length < 6) {\r\n                return (\r\n                    <><span className=\"message-box\" >Password must be 5 characters long</span><br/></>\r\n                )\r\n            }\r\n            else {\r\n                isPasswordVerified = true\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const errorMessage = () => {\r\n        return (<div className=\"message-box\" style={{ display: Error ? \"block\" : \"none\" }}>\r\n            {Error}\r\n        </div>)\r\n    }\r\n\r\n    const successMessage = () => {\r\n        return (<div className=\"message\" style={{ display: Loading ? \"block\" : \"none\", color: \"grey\" }}>\r\n            Loading .....\r\n        </div>)\r\n    }\r\n\r\n    const renderLogin = () => {\r\n        return (\r\n            <form class=\"login-form\" onSubmit={e => handleSubmit(e)}>\r\n                <label htmlFor=\"userEmail\">Email :</label>\r\n                <div className=\"form-group\" ref={email}>\r\n                    <div><i className=\"fa fa-envelope\"></i></div><span></span>\r\n                    <input value={Email} onChange={handleChange(\"Email\")} type=\"email\" name=\"Email\" id=\"userEmail\" placeholder=\"Enter your email\" />\r\n                </div><br />\r\n                {emailValidateError()}\r\n                <br />\r\n                <label htmlFor=\"pwd\">Password :</label>\r\n                <div className=\"form-group\">\r\n                    <div><i className=\"fa fa-key\"></i></div><span></span>\r\n                    <input value={Password} type=\"password\" onChange={handleChange(\"Password\")} id=\"pwd\" name=\"Password\" placeholder=\"Password\" />\r\n                </div><br />\r\n                {passwordValidateError()}\r\n                <button>LOGIN</button>\r\n                <div className=\"or-line\">\r\n                    <span>OR</span>\r\n                </div>\r\n\r\n                <Link to=\"/register\">New User? Register Here</Link>\r\n            </form>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"container login\">\r\n            <div className=\"img-wrapper\">\r\n                <img src=\"images/Person.svg\" alt=\"person standing at bus stop\" />\r\n            </div>\r\n            <div className=\"form-control\">\r\n                <div className=\"head\">\r\n                    <h1>User Login</h1>\r\n                </div>\r\n                {errorMessage()}\r\n                {successMessage()}\r\n                {renderLogin()}\r\n                {conductRedirect()}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { register } from '../auth/helper'\r\nimport '../stylesheets/authPanel.css'\r\n\r\n\r\nconst Register = () => {\r\n\r\n    const [formData, setFormData] = useState({\r\n        Name: '',\r\n        Email: '',\r\n        Password: '',\r\n        Gender: '',\r\n        Mobile: '',\r\n        Error: '',\r\n        Success: false,\r\n    })\r\n\r\n    let [isGenderVerified, verifiedGender] = useState(false)\r\n\r\n    const { Name, Email, Password, Gender, Mobile, Success, Error } = formData\r\n\r\n    let isEmailVerified = false,\r\n        isPasswordVerified = false,\r\n        isMobileVerified = false,\r\n        isNameVerified = false\r\n\r\n\r\n    const SignUpForm = () => {\r\n        return (\r\n\r\n            <form onSubmit={e => handleSubmit(e)}>\r\n                <label htmlFor=\"username\">Name :</label>\r\n                <div className=\"form-group\">\r\n                    <div><i className=\"fa fa-user\"></i></div><span></span>\r\n                    <input onChange={handleChange(\"Name\")} value={Name} type=\"name\" id=\"username\" placeholder=\"Enter your name\" name=\"username\" />\r\n                </div><br />\r\n                {nameValidateError()}\r\n                <br />\r\n                <label htmlFor=\"userEmail\">Email :</label>\r\n                <div className=\"form-group\">\r\n                    <div><i className=\"fa fa-envelope\"></i></div><span></span>\r\n                    <input onChange={handleChange(\"Email\")} value={Email} type=\"email\" id=\"userEmail\" placeholder=\"Enter your email\" name=\"email\" />\r\n                </div><br />\r\n                {emailValidateError()}\r\n                <br />\r\n\r\n                <label htmlFor=\"mobile\">Mobile :</label>\r\n                <div className=\"form-group\">\r\n                    <div><i className=\"fa fa-phone\"></i></div><span></span>\r\n                    <input onChange={handleChange(\"Mobile\")} value={Mobile} type=\"number\" id=\"mobile\" placeholder=\"Contact number\" name=\"mobile\" />\r\n                </div><br />\r\n                {mobileValidateError()}\r\n                <br />\r\n                <label>Gender :</label>\r\n                <div className=\"form-group gender\">\r\n\r\n                    <div className=\"genderMale\">\r\n                        <input value={Gender} onChange={handleChange(\"Gender\")} type=\"radio\" id=\"male\" name=\"gender\" value=\"Male\" />\r\n                        <label className=\"male\" htmlFor=\"male\"><div><i className=\"fa fa-male\"></i></div></label>\r\n                    </div>\r\n                    <span></span>\r\n                    <div className=\"genderFemale\">\r\n                        <input value={Gender} onChange={handleChange(\"Gender\")} type=\"radio\" id=\"female\" name=\"gender\" value=\"Female\" />\r\n                        <label className=\"female\" htmlFor=\"female\"><div><i className=\"fa fa-female\"></i></div></label>\r\n                    </div>\r\n\r\n                </div><br />\r\n\r\n\r\n                <label htmlFor=\"pwd\">Password :</label>\r\n                <div className=\"form-group\">\r\n                    <div><i className=\"fa fa-key\"></i></div><span></span>\r\n                    <input onChange={handleChange(\"Password\")} value={Password} type=\"Password\" id=\"pwd\" placeholder=\"Password\" name=\"password\" />\r\n                </div><br />\r\n                {passwordValidateError()}\r\n                <br />\r\n                {renderBtn()}\r\n                <Link to=\"/login\">Existing User?<span>Login Here</span></Link>\r\n                {/* <a href=\"#\">Existing User?<span>Login Here</span> </a> */}\r\n            </form>\r\n        )\r\n    }\r\n\r\n    const renderBtn = () => {\r\n        if (isEmailVerified && isPasswordVerified && isMobileVerified && isNameVerified && isGenderVerified){\r\n            return <button>Register</button>\r\n               \r\n        }\r\n    }\r\n\r\n    const handleChange = (inputField) => (event) => {\r\n        if (inputField === 'Gender') {\r\n            verifiedGender(true)\r\n            setFormData({ ...formData, [inputField]: event.target.value })\r\n        } \r\n        else {\r\n            setFormData({ ...formData, [inputField]: event.target.value })\r\n\r\n        }\r\n    }\r\n\r\n\r\n    const handleSubmit = event => {\r\n        event.preventDefault()\r\n        if (isEmailVerified && isPasswordVerified && isMobileVerified && isNameVerified) {\r\n            setFormData({ ...formData, Error: false })\r\n            register({ Name, Email, Password, Gender, Mobile })\r\n                .then((data) => {\r\n                    if (data.Message) {\r\n                        setFormData({ ...formData, Error: data.message, success: false })\r\n                    }\r\n                    else {\r\n                        setFormData({\r\n                            ...formData,\r\n                            Name: '',\r\n                            Password: '',\r\n                            Gender: '',\r\n                            Mobile: '',\r\n                            Email: '',\r\n                            Error: '',\r\n                            Success: true\r\n                        })\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    setFormData({ ...formData, Error: \"Failed to register\", success: false })\r\n                })\r\n        }\r\n        else {\r\n            console.log(\"asdasd\", isEmailVerified, isPasswordVerified, isMobileVerified, isNameVerified)\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    const errorMessage = () => {\r\n        return (<div className=\"message-box\" style={{ display: Error ? \"block\" : \"none\" }}>\r\n            {Error}\r\n        </div>)\r\n    }\r\n\r\n\r\n\r\n    const successMessage = () => {\r\n        return (<div className=\"message-box\" style={{ display: Success ? \"block\" : \"none\" }}>\r\n            Account created successfully. Please <Link to=\"/login\">Login Here</Link>\r\n        </div>)\r\n    }\r\n\r\n    const passwordValidateError = () => {\r\n        if (Password) {\r\n            if (Password.length < 6) {\r\n                return (\r\n                    <><span className=\"message-box\" >Password must be 5 characters long</span><br /></>\r\n                )\r\n            }\r\n            else {\r\n                isPasswordVerified = true\r\n            }\r\n        }\r\n    }\r\n\r\n    const emailValidateError = () => {\r\n        const regexp = RegExp(\r\n            /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n        );\r\n        if (Email.length > 0 && !regexp.test(Email)) {\r\n\r\n            return (<><span className=\"message-box\" >Email is Invalid</span><br /></>)\r\n        }\r\n        if (regexp.test(Email)) {\r\n            isEmailVerified = true\r\n        }\r\n\r\n    }\r\n\r\n    const nameValidateError = () => {\r\n        if (Name && Name.length < 3) {\r\n            return (<><span className=\"message-box\" >Name must be 3 characters long</span><br /></>)\r\n        }\r\n        if (Name && Name.length > 3) {\r\n            isNameVerified = true\r\n        }\r\n    }\r\n\r\n    const mobileValidateError = () => {\r\n        if (Mobile && (Mobile.length !== 10)) {\r\n\r\n            return (<><span className=\"message-box\" >Invalid mobile number</span><br /></>)\r\n        }\r\n        if (Mobile && Mobile.length == 10) {\r\n            isMobileVerified = true\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container register-container\">\r\n            <div className=\"img-wrapper\">\r\n                <img src=\"images/Person.svg\" alt=\"person standing at bus stop\" />\r\n            </div>\r\n\r\n            <div className=\"form-control\">\r\n                <div className=\"head\">\r\n                    <h1>User Signup</h1>\r\n                </div>\r\n                {errorMessage()}\r\n                {successMessage()}\r\n                {SignUpForm()}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register;","import React, { useState } from 'react';\r\nimport '../stylesheets/booking.css'\r\n\r\nconst SeatLayout = (props) => {\r\n\r\n\r\n    const [bookDetail, setBookDetail] = useState({\r\n        Seats: []\r\n    })\r\n\r\n    const { Seats } = bookDetail\r\n    const handleSeatClass = (e) => {\r\n        let SeatNo = e.target.innerText\r\n        props.onAddSeat(e.target.innerText)\r\n        if (!Seats.includes(SeatNo)) {\r\n            e.target.classList.add('reserved')\r\n            Seats.push(SeatNo)\r\n        }\r\n        else {\r\n            let ind = Seats.indexOf(SeatNo)\r\n            e.target.classList.remove('reserved')\r\n            Seats.splice(ind, 1)\r\n        }\r\n        setBookDetail({ Seats })\r\n    }\r\n\r\n    const renderSingleSeat = (ind) => {\r\n        if (props.AllSeats[ind]) {\r\n            return (\r\n                <div class=\"seat\" onClick={e => handleSeatClass(e)}>{ind+1}</div>\r\n            );\r\n        }\r\n        return (<div class=\"seat reserved\">{ind+1}</div>);\r\n    }\r\n\r\n    const renderSeatRow = (ind) => {\r\n        return (\r\n            <div class=\"row\">\r\n                <div class=\"layout-1\">\r\n                    {renderSingleSeat(ind)}\r\n                    {renderSingleSeat(ind + 1)}\r\n\r\n                    {/* <div class={props.AllSeats[ind]===true ?\"seat reserved\" : \"seat\"} {...renderFunction(ind)}>{ind}</div>\r\n                    <div class={props.AllSeats[ind+1]===true ?\"seat reserved\" : \"seat\"} onClick={e => handleSeatClass(e)}>{ind + 1}</div> */}\r\n                </div>\r\n                <div class=\"layout-2\">\r\n                    {renderSingleSeat(ind + 2)}\r\n                    {renderSingleSeat(ind + 3)}\r\n\r\n                    {/* <div class={props.AllSeats[ind+2]===true ?\"seat reserved\" : \"seat\"} onClick={e => handleSeatClass(e)}>{ind + 3}</div>\r\n                    <div class={props.AllSeats[ind+3]===true ?\"seat reserved\" : \"seat\"} onClick={e => handleSeatClass(e)}>{ind + 4}</div> */}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderSeats = () => {\r\n\r\n        return (\r\n            <div class=\"seat-viewer\">\r\n                <div class=\"seatTitle\"><h2>SEATS</h2></div>\r\n                <div class=\"seats\">\r\n                    {renderSeatRow(0)}\r\n                    {renderSeatRow(4)}\r\n                    {renderSeatRow(8)}\r\n                    {renderSeatRow(12)}\r\n                    {renderSeatRow(16)}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (<>\r\n        {renderSeats()}\r\n    </>\r\n    )\r\n}\r\n\r\nexport default SeatLayout;","import React, { useState, useContext } from 'react';\r\nimport UserContext from '../../UserContext/UserContext';\r\nimport SeatLayout from './SeatLayout';\r\nimport '../stylesheets/booking.css';\r\n\r\nconst Bookings = ({ history }) => {\r\n\r\n    const { userBusDetail, dispatch } = useContext(UserContext)\r\n    console.log(userBusDetail.Seats)\r\n    if (!userBusDetail || Object.keys(userBusDetail).length === 0) {\r\n        history.push('/')\r\n    }\r\n\r\n    let SeatsDetail = [];\r\n    const seatInfo = () => {\r\n        let totalSeats = userBusDetail.Seats\r\n        SeatsDetail = [...new Array(24)].map((arr, idx) => {\r\n            return totalSeats['Seat' + (idx + 1)] !== true ? true : false\r\n        })\r\n    }\r\n\r\n\r\n    const [userDetail, setUserDetail] = useState({\r\n        Name: [],\r\n        Age: [],\r\n        Gender: [],\r\n        Seats: [],\r\n        isGenderVerified : false\r\n    })\r\n\r\n    let [isGenderVerified,verifiedGender] = useState(false)\r\n\r\n    let isNameVerified = false,\r\n        isAgeVerified = false\r\n\r\n        const { Name, Age, Gender, Seats } = userDetail\r\n\r\n    const handleSeatNumber = (SeatNo) => {\r\n        if (!Seats.includes(SeatNo)) {\r\n            Name.push('')\r\n            Age.push('')\r\n            Gender.push('')\r\n            Seats.push(SeatNo)\r\n        }\r\n        else {\r\n            let ind = Seats.indexOf(SeatNo)\r\n            Name.splice(ind, 1)\r\n            Age.splice(ind, 1)\r\n            Gender.splice(ind, 1)\r\n            Seats.splice(ind, 1)\r\n        }\r\n        setUserDetail({ ...userDetail, Name, Age, Gender, Seats })\r\n    }\r\n\r\n    const handleChange = (inputField, idx) => (event) => {\r\n        let data = userDetail[inputField]\r\n        data[idx] = event.target.value\r\n        if(inputField==='Gender'){\r\n            verifiedGender(true)\r\n            setUserDetail({ ...userDetail, [inputField]: [...data] })\r\n        }\r\n        else{\r\n        setUserDetail({ ...userDetail, [inputField]: [...data] })\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    const renderSeatsDetails = () => {\r\n        return Seats.map((seat, idx) => {\r\n            if (Seats.length > idx + 1) {\r\n                return seat + ','\r\n            }\r\n            else\r\n                return seat\r\n        })\r\n    }\r\n\r\n    const nameValidateError = (ind) => {\r\n        if (Name[ind] && Name[ind].length < 3) {\r\n            return (<><span className=\"message-box\" >Name must be 3 characters long</span><br /></>)\r\n        }\r\n        if (Name[ind] && Name[ind].length > 3) {\r\n            isNameVerified = true\r\n        }\r\n    }\r\n\r\n    const ageValidateError = (ind) => {\r\n        if (Age[ind] && Number(Age[ind]) > 110) {\r\n            return (<><span className=\"message-box\" >Too old</span><br /></>)\r\n        }\r\n        if (Age[ind] && Number(Age[ind]) < 0) {\r\n            return (<><span className=\"message-box\" >Never born</span><br /></>)\r\n        }\r\n        if (Age[ind] > 0 && Number(Age[ind]) < 110 && Number(Age[ind]) > 0) {\r\n            isAgeVerified = true\r\n        }\r\n    }\r\n\r\n\r\n    const renderForm = (ind) => {\r\n        return (\r\n            <form class=\"form-control\">\r\n                <label for=\"Name\">Name :</label>\r\n                <div class=\"form-group\">\r\n                    <div><i class=\"fa fa-user\"></i></div><span></span>\r\n                    <input type=\"Name\" onChange={handleChange('Name', ind)} id=\"Name\" value={Name[ind]} placeholder=\"Enter your name\" />\r\n                </div><br />\r\n                {nameValidateError(ind)}\r\n                <br />\r\n                <label for=\"Age\">Age :</label>\r\n                <div class=\"form-group\">\r\n                    <div><i class=\"fa fa-child\"></i></div><span></span>\r\n                    <input type=\"Number\" onChange={handleChange('Age', ind)} id=\"Age\" value={Age[ind]} placeholder=\"Enter your Age\" />\r\n                </div><br />\r\n                {ageValidateError(ind)}\r\n                <br />\r\n                <label>Gender :</label>\r\n                <div class=\"form-group gender\">\r\n                    <div class=\"genderMale\">\r\n                        <input type=\"radio\" id={'Male' + [ind]} name={'Gender' + [ind]} value=\"Male\" onChange={handleChange('Gender', ind)} {...Gender === 'Male' ? 'Checked' : ''} />\r\n                        <label class=\"male\" htmlFor={'Male' + [ind]}>\r\n                            <div><i class=\"fa fa-male\"></i></div>\r\n                        </label>\r\n                    </div>\r\n                    <span></span>\r\n                    <div class=\"genderFemale\">\r\n                        <input type=\"radio\" id={'Female' + [ind]} name={'Gender' + [ind]} onChange={handleChange('Gender', ind)} value=\"Female\" {...Gender === 'Male' ? 'Checked' : ''} />\r\n                        <label class=\"female\" htmlFor={'Female' + [ind]}>\r\n                            <div><i class=\"fa fa-female\"></i></div>\r\n                        </label>\r\n                    </div>\r\n                </div><br />\r\n            </form>\r\n        )\r\n    }\r\n\r\n    const handleBookingData = () => {\r\n        const newBusDetail = { ...userBusDetail, ...userDetail }\r\n        if (isNameVerified && isAgeVerified && isGenderVerified) {\r\n            dispatch({ type: \"STORE_BOOKING_DETAILS\", BusDetails: newBusDetail })\r\n            history.push('/user/payment')\r\n        }\r\n\r\n    }\r\n\r\n    const renderPaynBtn = ()=>{\r\n        if(isNameVerified && isAgeVerified && isGenderVerified){\r\n            return <button className=\"pay-btn\" onClick={e => handleBookingData()}>Click to Proceed</button>\r\n        }\r\n    }\r\n\r\n\r\n    const renderBookingSummary = () => {\r\n        let TravelDate = userBusDetail.TravelDate\r\n        return (\r\n            <div class=\"booking-summary\">\r\n                <div class=\"head\">\r\n                    Booking Summary\r\n                </div>\r\n                <div class=\"detail-container\">\r\n                    <div >\r\n                        <span>Bus-Type :</span>\r\n                        <span>{userBusDetail.BusType}</span>\r\n                    </div>\r\n                    <div>\r\n                        <span>From :</span>\r\n                        <span>{userBusDetail.Source}</span>\r\n                    </div>\r\n                    <div>\r\n                        <span>To :</span>\r\n                        <span>{userBusDetail.Destination}</span>\r\n                    </div>\r\n                    <div>\r\n                        <span>Date :</span>\r\n                        <span>{('0' + TravelDate.getDate()).slice(-2) + '-' + ('0' + ((+TravelDate.getMonth()) + 1)).slice(-2) + '-' + ('0' + TravelDate.getYear()).slice(-2)}</span>\r\n                    </div>\r\n                    <div>\r\n                        <span>Seat No :</span>\r\n                        <span>{renderSeatsDetails()}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"booking-form\">\r\n                    {Name.map((name, idx) => {\r\n                        return renderForm(idx)\r\n                    })}\r\n                </div>\r\n                <div>\r\n                    <span>Total Seat :</span>\r\n                    <span>{Seats.length}</span>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>Fare :</span>\r\n                    <span>{'\\u20B9'} {Seats.length * userBusDetail.Fare}</span>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>Service Tax :</span>\r\n                    <span>{'\\u20B9'} {(Seats.length >= 1 ? 120 : 0)}</span>\r\n                </div>\r\n\r\n                <div>\r\n                    <span>Total Charges :</span>\r\n                    <span>{'\\u20B9'} {(Seats.length * userBusDetail.Fare) + (Seats.length * 120)}</span>\r\n                </div>\r\n                {renderPaynBtn()}\r\n                \r\n            </div>\r\n        )\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <div class=\"main-body\">\r\n            {seatInfo()}\r\n            <SeatLayout onAddSeat={seatNo => handleSeatNumber(seatNo)} AllSeats={SeatsDetail} />\r\n            {renderBookingSummary()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Bookings;","import React, { useContext, useState } from 'react';\r\nimport '../stylesheets/payment.css'\r\nimport { API } from '../backend';\r\nimport { bookTicket } from './helper'\r\nimport UserContext from '../../UserContext/UserContext';\r\n\r\n\r\nconst Payment = ({ history }) => {\r\n\r\n    const { userBusDetail } = useContext(UserContext)\r\n\r\n    if (!userBusDetail || Object.keys(userBusDetail).length === 0) {\r\n        history.push('/')\r\n    }\r\n\r\n\r\n    const [formData, setFormData] = useState({\r\n        Card: '',\r\n        CVV: '',\r\n        Error: '',\r\n        Success: false\r\n    })\r\n\r\n    const { Card, CVV, Success, Error } = formData\r\n\r\n    let isCardNoVerified = false,\r\n        isCVVVerified = false\r\n\r\n    const cardValidateError = () => {\r\n        if (Card && (Card.length < 16 || Card.length > 16)) {\r\n            return (<><span className=\"message-box\" > It must be 16 digit</span><br /></>)\r\n        }\r\n        if (Card && Card.length === 16) {\r\n            isCardNoVerified = true\r\n        }\r\n    }\r\n\r\n    const cvvValidateError = () => {\r\n        if (CVV && (CVV.length <3 || CVV.length >4)) {\r\n            return (<><span className=\"message-box\" >Invalid CVV / CVC</span><br /></>)\r\n        }\r\n        if (Card && (CVV.length === 3 || CVV.length === 4)) {\r\n            isCVVVerified = true\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const renderYear = () => {\r\n        return (\r\n            <>\r\n                <option>2022</option>\r\n                <option>2023</option>\r\n                <option>2024</option>\r\n                <option>2025</option>\r\n                <option>2026</option>\r\n                <option>2027</option>\r\n                <option>2028</option>\r\n                <option>2029</option>\r\n                <option>2030</option>\r\n            </>\r\n        )\r\n    }\r\n\r\n\r\n    const renderMonths = () => {\r\n        return (\r\n            <>\r\n                <option>January</option>\r\n                <option>February</option>\r\n                <option>March</option>\r\n                <option>April</option>\r\n                <option>May</option>\r\n                <option>June</option>\r\n                <option>July</option>\r\n                <option>August</option>\r\n                <option>September</option>\r\n                <option>October</option>\r\n                <option>November</option>\r\n                <option>December</option>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const renderPaymentCardImg = () => {\r\n        return (\r\n            <div className=\"credit-card\">\r\n                <div className=\"card-img\">\r\n                    <img src=\"../images/credit-card.svg\" alt=\"credit-card\" />\r\n                </div>\r\n                <div className=\"accept-card\">\r\n                    <div><img src=\"../images/payment/rupay.svg\" alt=\"rupay\" /></div>\r\n                    <div><img src=\"../images/payment/VISA.svg\" alt=\"VISA\" /></div>\r\n                    <div><img src=\"../images/payment/master-card.svg\" alt=\"Master Card\" /></div>\r\n                    <div><img src=\"../images/payment/american-xpress.svg\" alt=\"american-xpress\" /></div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const handleChange = (inputField) => (event) => {\r\n        setFormData({ ...formData, [inputField]: event.target.value })\r\n    }\r\n\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        if (isCVVVerified && isCardNoVerified) {\r\n            let newBusDetail = { ...userBusDetail }\r\n            newBusDetail.Bus_ID = userBusDetail._id\r\n            bookTicket({ ...newBusDetail })\r\n                .then(() => {\r\n                    history.push('/user/ticket-history')\r\n                })\r\n                .catch(error => {\r\n                    setFormData({ ...formData, Error: \"Unable to book ticket\" })\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    const renderPaynBtn = ()=>{\r\n        if(isCVVVerified && isCardNoVerified){\r\n            return <button className=\"pay-btn\" >Pay Now</button>\r\n        }\r\n    }\r\n\r\n    const renderPaymentCard = () => {\r\n        return (\r\n            <div className=\"payment-detail\">\r\n                <h1>PAYMENT</h1>\r\n                <p>Pay with Credit/Debit Card</p>\r\n                <form className=\"payment-form\" onSubmit={e => handleSubmit(e)}>\r\n                    <label htmlFor=\"card-number\">Credit card number</label><br />\r\n                    <input type=\"number\" id=\"card-number\" onChange={handleChange(\"Card\")} placeholder=\"4584 XXXX XXXX 0123\" />\r\n                    <br />\r\n                    {cardValidateError()}\r\n                    <br />\r\n                    <label htmlFor=\"month\" className=\"exp-label\">Expiration</label>\r\n                    <div className=\"expiration-container\">\r\n                        <div className=\"exp-date\">\r\n                            <div className=\"exp-month\">\r\n                                <select id=\"month\">\r\n                                    {renderMonths()}\r\n                                </select>\r\n                            </div>\r\n                            <i className=\"fa -fa-arrow-down\"></i>\r\n                            <div className=\"arrow\">\r\n                                <img src=\"../images/arrow.png\" alt=\"arrow\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"exp-date\">\r\n                            <div className=\"exp-year\">\r\n                                <select>\r\n                                    {renderYear()}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"arrow\">\r\n                                <img src=\"../images/arrow.png\" alt=\"arrow\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <label htmlFor=\"cvv\" className=\"cvv-label\">CVC/ CVV</label>\r\n                    <div className=\"cvv-block\">\r\n                        <input type=\"number\" id=\"cvv\" onChange={handleChange(\"CVV\")} />\r\n                        <span>3 or 4 digits code</span>\r\n                    </div>\r\n                    {cvvValidateError()}\r\n                    {renderPaynBtn()}\r\n                    \r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <section className=\"payment-container\">\r\n            {renderPaymentCardImg()}\r\n            {renderPaymentCard()}\r\n        </section>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default Payment;","import { API } from '../backend'\r\n\r\n\r\nexport const bookTicket = (ticketDetail) => {\r\n\r\n    if (localStorage.getItem(\"authToken\")) {\r\n        const User_ID = JSON.parse(localStorage.getItem(\"UserID\"));\r\n        const token = JSON.parse(localStorage.getItem(\"authToken\"));\r\n        console.log(`${API}user/${User_ID}/bookTicket`)\r\n\r\n        return fetch(`${API}user/${User_ID}/bookTicket`, {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Authorization':'Bearer '+token,\r\n                \"Content-Type\": 'application/json'\r\n            },\r\n            body: JSON.stringify(ticketDetail)\r\n        })\r\n        .then((response) => {\r\n            console.log(response)\r\n                return response.json()\r\n            })\r\n        .catch((err) => { console.log(err) });\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { API } from '../backend'\r\n\r\n\r\nexport const getTickets = async (ticketDetail) => {\r\n\r\n    if (localStorage.getItem(\"authToken\")) {\r\n        const User_ID = JSON.parse(localStorage.getItem(\"UserID\"));\r\n        const token = JSON.parse(localStorage.getItem(\"authToken\"));\r\n\r\n        return await fetch(`${API}tickets/user/${User_ID}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Authorization': 'Bearer ' + token,\r\n                \"Content-Type\": 'application/json'\r\n            },\r\n        }).then((response) => {\r\n            return response.json()\r\n        })\r\n            .catch((err) => { console.log(err) })\r\n    }\r\n}\r\n\r\nexport const removeTicket = async ({_id}) => {\r\n    if (localStorage.getItem(\"authToken\")) {\r\n        const User_ID = JSON.parse(localStorage.getItem(\"UserID\"));\r\n        const token = JSON.parse(localStorage.getItem(\"authToken\"));\r\n\r\n        return await fetch(`${API}tickets/user/${User_ID}/remove-ticket-history`, {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Authorization': 'Bearer ' + token,\r\n                \"Content-Type\": 'application/json'\r\n            },\r\n            body: JSON.stringify({_id})\r\n        }).then((response) => {\r\n            return response.json()\r\n        })\r\n            .catch((err) => { console.log(err) })\r\n    }\r\n}\r\n\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { getTickets,removeTicket } from './helper'\r\nimport '../stylesheets/history.css';\r\n\r\nconst Tickets = () => {\r\n\r\n    const [userTicketDetails, setTicketDetails] = useState({\r\n        ticketDetails: '',\r\n        loading: false,\r\n        Message: ''\r\n    })\r\n    const [removalStatus,setRemovalStatus] = useState(false);\r\n    const { ticketDetails, loading, Message } = userTicketDetails\r\n    \r\n    useEffect(() => {\r\n        getTicketData();\r\n    },[removalStatus]);\r\n\r\n    const getTicketData = () => {\r\n        setTicketDetails({ ...userTicketDetails, loading: 'Your tickets are loading...', Message: '' })\r\n        getTickets()\r\n            .then((data) => {\r\n                if (data.Error) {\r\n                    setTicketDetails({ ...userTicketDetails, loading: '', Message: data.Error })\r\n                }\r\n                else {\r\n                    setTicketDetails({ ...userTicketDetails, loading: '', Message: '', ticketDetails: { ...data } })\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                setTicketDetails({ ...userTicketDetails, loading: '', Message: 'Failed to load ticket....', ticketDetails: '' })\r\n            });\r\n    }\r\n\r\n\r\n    const renderLoadingMsg = () => {\r\n        if (loading) {\r\n            return (<div className=\"msg-box\" >\r\n                {loading}\r\n            </div>)\r\n        }\r\n\r\n\r\n    }\r\n\r\n    const renderMsg = () => {\r\n        if (Message) {\r\n            return (<div className=\"msg-box\" >\r\n                {Message}\r\n            </div>)\r\n        }\r\n    }\r\n\r\n\r\n    const renderPasengerName = (Name) => {\r\n        return Name.map((person => {\r\n            return <span className=\"name\">{person},</span>\r\n        }))\r\n    }\r\n\r\n    const handleTicketHistory = (_id) => {\r\n        removeTicket({_id}).then((data)=>{\r\n            if(data.error){\r\n                setTicketDetails({...userTicketDetails,Message:\"Failed to delete ticket history\"})\r\n                setRemovalStatus(false);\r\n            }\r\n            else{\r\n                setRemovalStatus(true);\r\n            }\r\n        })\r\n        .catch((err)=>{ \r\n            setTicketDetails({...userTicketDetails,Message:\"Failed to delete ticket history\"})\r\n            setRemovalStatus(false);\r\n        })\r\n    }\r\n\r\n    const renderBookingHistory = () => {\r\n        let keys = Object.keys(userTicketDetails.ticketDetails)\r\n        return keys.map(key => {\r\n            let _id = userTicketDetails.ticketDetails[key]._id\r\n            let TravelDate = new Date(userTicketDetails.ticketDetails[key].TravelDate);\r\n            let Arrival = new Date(userTicketDetails.ticketDetails[key].Arrival);\r\n            let Departure = new Date(userTicketDetails.ticketDetails[key].Departure);\r\n            TravelDate = ('0' + TravelDate.getDate()).slice(-2) + '-' + ('0' + ((+TravelDate.getMonth()) + 1)).slice(-2) + '-' + ('0' + TravelDate.getYear()).slice(-2);\r\n            Arrival = ('0' + new Date(Arrival).getHours()).slice(-2) + ':' + ('0' + new Date(Arrival).getMinutes()).slice(-2);\r\n            Departure = ('0' + new Date(Departure).getHours()).slice(-2) + ':' + ('0' + new Date(Departure).getMinutes()).slice(-2);\r\n            \r\n            return (\r\n                <div class=\"ticket\">\r\n                    <div class=\"ticket-image\">\r\n                        <img src=\"/images/redbus.svg\" alt=\"bus-img\" />\r\n                    </div>\r\n\r\n                    <div class=\"ticket-body\">\r\n                        <div class=\"ticket-header\">\r\n                            <h2><span>STATUS</span>: BOOKED</h2>\r\n                            <span>TRANSACTION ID : {userTicketDetails.ticketDetails[key].TransactionId}</span>\r\n                        </div>\r\n\r\n                        <div class=\"ticket-data\">\r\n\r\n                            <div class=\"row\">\r\n                                <div>\r\n                                    <span>Bus-Type:</span>\r\n                                    <span>{userTicketDetails.ticketDetails[key].BusType}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"name-row\">\r\n                                <span>Name: </span>\r\n                                {renderPasengerName(userTicketDetails.ticketDetails[key].Name)}\r\n                            </div>\r\n                            <div class=\"name-row\">\r\n                                <span>Gender: </span>\r\n                                {renderPasengerName(userTicketDetails.ticketDetails[key].Gender)}\r\n                            </div>\r\n\r\n                            <div class=\"row\">\r\n                                <div>\r\n                                    <span>From:</span>\r\n                                    <span>{userTicketDetails.ticketDetails[key].Source}</span>\r\n                                </div>\r\n                                <div>\r\n                                    <span>To:</span>\r\n                                    <span>{userTicketDetails.ticketDetails[key].Destination}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"row\">\r\n                                <div>\r\n                                    <span>Arrival:</span>\r\n                                    <span>{Arrival}</span>\r\n                                </div>\r\n                                <div>\r\n                                    <span>Departure:</span>\r\n                                    <span>{Departure}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"row travel\">\r\n                                <div>\r\n                                    <span>DateofJourney:</span>\r\n                                    <span>{TravelDate}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"ticket-footer\">\r\n                            <div className=\"row flex-end\">\r\n                                <span><i className=\"fa fa-trash\" title=\"Remove Ticket\" onClick={e=>handleTicketHistory(_id)}></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        })\r\n    }\r\n\r\n\r\n    const renderHeader = () => {\r\n        return (\r\n            <div className=\"header-ticket\">\r\n                Tickets History\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderEmptyHistory = () => {\r\n        if (Object.keys(userTicketDetails.ticketDetails).length == 0 && !loading) {\r\n            return (\r\n                <div className=\"message-box\">\r\n                    No ticket history found...\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div class=\"history-conatiner\">\r\n            {renderHeader()}\r\n            {renderLoadingMsg()}\r\n            {Error?renderMsg():null}\r\n            {renderBookingHistory()}\r\n            {renderEmptyHistory()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Tickets;","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./helper\";\r\n\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props =>\r\n                isAuthenticated() ? (\r\n                    <Component {...props} />\r\n                ) : (\r\n                        <Redirect\r\n                            to={{\r\n                                pathname: \"/login\",\r\n                                state: { from: props.location }\r\n                            }}\r\n                        />\r\n                    )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","\r\nconst userReducer = (state,action)=>{\r\n    let {type} = action\r\n    switch(type){\r\n\r\n        case 'STORE_BOOKING_DETAILS' :\r\n            let {BusDetails} = action\r\n            return BusDetails\r\n\r\n        case 'REMOVE_BOOKING_DETAILS':\r\n            return {}\r\n            \r\n        default:\r\n            return state \r\n    }   \r\n}\r\n\r\nexport default userReducer;","import React, { useReducer } from 'react';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\nimport Home from './components/core/Home';\r\nimport Navbar from './components/core/Navbar';\r\nimport Login from './components/user/Login';\r\nimport Register from './components/user/Register';\r\nimport Bookings from './components/user/BookingDetail';\r\nimport Payment from './components/payment/Payment';\r\nimport Tickets from './components/user/Tickets';\r\nimport PrivateRoute from './components/auth/privateRoute';\r\nimport UserContext from './UserContext/UserContext'\r\nimport UserReducer from './reducer/UserReducer';\r\n\r\n\r\nconst initialState = {}\r\n\r\n\r\nconst Routes = () => {\r\n\r\n\r\n    const [userBusDetail, dispatch] = useReducer(UserReducer, initialState)\r\n\r\n    return (\r\n        <BrowserRouter>\r\n            <Navbar />\r\n            <UserContext.Provider value={{userBusDetail,dispatch}}>\r\n                <Switch>\r\n                    <Route exact path=\"/\" component={Home}></Route>\r\n                    <Route exact path=\"/\" component={Home}></Route>\r\n                    <Route exact path=\"/login\" component={Login}></Route>\r\n                    <Route exact path=\"/register\" component={Register}></Route>\r\n                    <PrivateRoute path=\"/user/book-ticket\" exact component={Bookings}></PrivateRoute>\r\n                    <PrivateRoute path=\"/user/ticket-history\" exact component={Tickets}></PrivateRoute>\r\n                    <PrivateRoute path=\"/user/payment\" exact component={Payment}></PrivateRoute>\r\n                </Switch>\r\n            </UserContext.Provider>\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default Routes;\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from './Routes';\nimport * as serviceWorker from './serviceWorker';\nimport 'font-awesome/css/font-awesome.css';\n\nReactDOM.render(\n    <Routes />,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}